(()=>{var e={408:()=>{ko.components.register("collapsable-text",{viewModel:function(e){self.content=e.content,self.descriptionExpanded=ko.observable(!1),self.toggleDescription=()=>{self.descriptionExpanded(!self.descriptionExpanded())}},template:'\n        <div class="col-sm-12 d-flex flex-column collapsible-content collapsed-description"\n             data-bind="css: {\'collapsed-description\': !descriptionExpanded()}">\n            \x3c!-- ko if: content --\x3e\n            <p data-bind="html: content"></p>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: content --\x3e\n            <p data-bind="template: { nodes: $componentTemplateNodes }"></p>\n            \x3c!-- /ko --\x3e\n        </div>\n        <div class="col-sm-12">\n            <button class="pe-btn  pe-btn--transparent text-secondary d-flex gap-3"\n                    data-bind="click: toggleDescription">\n                <span data-bind="text: descriptionExpanded() ? \'Vis mindre\' : \'Vis mer\'"></span>\n                <i class="fa"\n                   data-bind="css: {\'fa-chevron-up\': descriptionExpanded(), \'fa-chevron-down\': !descriptionExpanded()}"></i>\n            </button>\n        </div>\n    '})},864:()=>{allowedEmbedTypes=["embed","youtube","vimeo","instagram","url"],allowedMediaTypes=[...allowedEmbedTypes,"image","html"],ko.components.register("light-box",{viewModel:class{images=null;currentIndex=ko.observable(0);constructor(e){this.images=e.images,this.hash=this.randomHash(),this.settings=Object.assign(Object.assign(Object.assign({},bootstrap.Modal.Default),bootstrap.Carousel.Default),{interval:!1,target:'[data-toggle="lightbox"]',gallery:"",size:"xl",constrain:!0}),this.settings=Object.assign(Object.assign({},this.settings),e.options),this.modalOptions=(()=>this.setOptionsFromSettings(bootstrap.Modal.Default))(),this.carouselOptions=(()=>this.setOptionsFromSettings(bootstrap.Carousel.Default))(),this.hasImages=ko.computed((()=>this.images().length>0)),this.additionalImageCount=ko.computed((()=>{var e=this.images().length-4;return e>0?e:0})),this.currentImage=ko.computed((()=>this.hasImages()?this.images()[this.currentIndex()]:{})),this.carouselClasses=ko.computed((()=>"lightbox-carousel carousel slide "+("fullscreen"===this.settings.size?"position-absolute w-100 translate-middle top-50 start-50":""))),this.processedImages=ko.pureComputed((()=>this.images().map(((e,t)=>{let n=e.src.replace(/\/$/,"");const a=new RegExp(`^(${allowedMediaTypes.join("|")})`,"i"),o=/^html/.test(n),i=/^image/.test(n),r=n.match(/.*youtu(.be\/|v\/|embed\/|watch\?v=)([^#&?]*).*/),s=n.match(/.*instagram.com.*/),l=r&&11===r[2].length?`https://www.youtube.com/embed/${r[2]}`:null,d=s?n+"/embed":null;let c;c=l||d||n;const u=!l&&!d;a.test(n)&&(n=n.replace(a,""));const m=this.settings.constrain?"mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0":"h-100 w-100",p=new URLSearchParams(n.split("?")[1]);let g=p.get("caption")?`<p class="lightbox-caption m-0 p-2 text-center text-white small"><em>${p.get("caption")}</em></p>`:"",b=n;if(g)try{b=new URL(n),b.searchParams.delete("caption"),b=b.toString()}catch(e){b=n}return{imgClasses:m,url:b,caption:g,isHtml:o,isForcedImage:i,isImg:u,inner:c}}))))}next=function(){if(this.hasImages()){var e=this.currentIndex()<this.images().length-1?this.currentIndex()+1:0;this.currentIndex(e)}};prev=function(){if(this.hasImages()){var e=this.currentIndex()>0?this.currentIndex()-1:this.images().length-1;this.currentIndex(e)}};attachArrowKeyHandlers(){$(document).on("keydown",(e=>{37===e.keyCode&&this.prev(),39===e.keyCode&&this.next()})).detach()}detachArrowKeyHandlers(){$(document).off("keydown")}openModal(e){this.hasImages()&&(this.currentIndex(e),$("#lightboxModal").modal("show"),this.attachArrowKeyHandlers(),$("#lightboxModal").on("hidden.bs.modal",(function(){this.detachArrowKeyHandlers()})))}closeModal(){$("#lightboxModal").modal("hide")}setOptionsFromSettings(e){return Object.keys(e).reduce(((e,t)=>Object.assign(e,{[t]:this.settings[t]})),{})}randomHash(e=8){return Array.from({length:e},(()=>Math.floor(36*Math.random()).toString(36))).join("")}},template:'\n        \x3c!-- ko if: hasImages --\x3e\n        <div class="modal lightbox fade" id="lightboxModal" tabindex="-1" aria-hidden="true">\n            <div class="modal-dialog modal-dialog-centered modal-xl">\n                <div class="modal-content border-0 bg-transparent">\n                    <div class="modal-body p-0">\n                        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 p-3"\n                                data-bs-dismiss="modal" aria-label="Close" style="font-size: 2rem;z-index: 2; background: none;">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                        \x3c!-- Carousel code here --\x3e\n                        <div class="lightbox-carousel carousel slide"\n                             data-bind="css: carouselClasses, carousel: carouselOptions">\n                            <div class="carousel-inner" data-bind="foreach: {data: processedImages, as: \'image\'}">\n                                <div class="carousel-item"\n                                     data-bind="css: {\'active\': $index() === $parent.currentIndex()}, style: { minHeight: \'100px\' }">\n                                    <div class="position-absolute top-50 start-50 translate-middle text-white">\n                                        <div class="spinner-border" role="status"></div>\n                                    </div>\n                                    <div class="ratio ratio-16x9" style="background-color: #000;">\n                                        \x3c!-- ko if: image.isImg --\x3e\n                                        <img data-bind="attr: { src: image.url, class: \'d-block \' + image.imgClasses + \' img-fluid\', style: { \'z-index\': 1, \'object-fit\': \'contain\' } }"/>\n                                        \x3c!-- /ko --\x3e\n\n                                        \x3c!-- ko ifnot: image.isImg --\x3e\n                                        <iframe data-bind="attr: { src: image.inner, title: image.isYoutube ? \'YouTube video player\' : \'Instagram Embed\', frameborder: \'0\', allow: image.isYoutube ? \'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\' : \'\', allowfullscreen: true }"></iframe>\n                                        \x3c!-- /ko --\x3e\n                                    </div>\n                                    \x3c!-- ko if: image.caption --\x3e\n                                    <p class="lightbox-caption m-0 p-2 text-center text-white small"\n                                       data-bind="html: image.caption"></p>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                            </div>\n                            \x3c!-- Carousel Controls --\x3e\n                            \x3c!-- ko if: images().length > 0 --\x3e\n                            <button class="carousel-control carousel-control-prev h-75 m-auto" type="button"\n                                    data-bs-target="#lightboxCarousel" data-bs-slide="prev" data-bind="click: prev">\n                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n                                <span class="visually-hidden">Previous</span>\n                            </button>\n                            <button class="carousel-control carousel-control-next h-75 m-auto" type="button"\n                                    data-bs-target="#lightboxCarousel" data-bs-slide="next" data-bind="click: next">\n                                <span class="carousel-control-next-icon" aria-hidden="true"></span>\n                                <span class="visually-hidden">Next</span>\n                            </button>\n                            \x3c!-- /ko --\x3e\n                        </div>\n                        \x3c!-- You might replace it with the carousel component in bootstrap --\x3e\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- Only display if there are images --\x3e\n        \x3c!-- ko if: hasImages --\x3e\n        <div class="row">\n            \x3c!-- Iterate over the first four images or all if less than four --\x3e\n            \x3c!-- ko foreach: images.slice(0, 4) --\x3e\n            <div class="col-md-3">\n                <div class="img-container-building">\n                    <img data-bind="attr: { src: src, alt: alt }, click: function() { $parent.openModal($index()) }"\n                         class="img-thumbnail-building cursor-pointer"/>\n\n                    \x3c!-- If it\'s the fourth image and there are additional images, show overlay --\x3e\n                    \x3c!-- ko if: $index() === 3 && $parent.additionalImageCount() > 0 --\x3e\n                    <div class="overlay" data-bind="click: function() { $parent.openModal($index()) }">\n                        <span class="additional-count">+\x3c!-- ko text: $parent.additionalImageCount --\x3e\n                            \x3c!-- /ko --\x3e</span>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- Display message if there are no images --\x3e\n        \x3c!-- ko ifnot: hasImages --\x3e\n        <div class="col-12">\n            <p class="text-center">No images available.</p>\n        </div>\n        \x3c!-- /ko --\x3e\n    '})},880:()=>{ko.components.register("time-slot-pill",{viewModel:function(e){const t=this;t.schedule=e.schedule,t.selectedResources=e.selectedResources,t.date=e.date,t.options={hour:"2-digit",minute:"2-digit"},t.startTime=ko.computed((()=>luxon.DateTime.fromFormat(t.date.from_,"dd/MM/yyyy HH:mm").toJSDate())),t.endTime=ko.computed((()=>luxon.DateTime.fromFormat(t.date.to_,"dd/MM/yyyy HH:mm").toJSDate())),t.toDateStr=e=>`${e.getDate()}. ${monthNamesShort[e.getMonth()].toLowerCase()}`,t.toTimeStr=(e,n)=>n?`${e.toLocaleTimeString("no",t.options).replace(":",".")} -\n                ${n.toLocaleTimeString("no",t.options).replace(":",".")}`:e.toLocaleTimeString("no",t.options).replace(":","."),t.removeDate=e.removeDate,t.error=ko.computed((()=>{if(!t.schedule||!t.selectedResources)return"Missing schedule or resources.";const e={date:luxon.DateTime.fromJSDate(t.startTime()).toFormat("yyyy-MM-dd"),from:luxon.DateTime.fromJSDate(t.startTime()).toFormat("HH:mm:ss"),to:luxon.DateTime.fromJSDate(t.endTime()).toFormat("HH:mm:ss"),resources:t.selectedResources()},n=t.schedule().find((t=>function(e,t){if(e.date!==t.date)return!1;if("allocation"===t.type||"booking"===t.type)return!1;const n=e.from<t.to&&e.to>t.from,a=e.resources.some((e=>t.resources.some((t=>e.id===t.id))));return n&&a}(e,t)));return n?`${e.resources.find((e=>n.resources.some((t=>t.id===e.id)))).name} ikke tilgjengelig`:void 0}))},template:'\n\n        <div class="pill pill--secondary" data-bind="css: {\'pill--error\': error}">\n            \x3c!-- ko if: startTime().getMonth() === endTime().getMonth() && startTime().getFullYear() === endTime().getFullYear() && startTime().getDate() === endTime().getDate() --\x3e\n            <div class="pill-date">\n                <span className="text-primary text-bold" data-bind="text: toDateStr(startTime())"></span>\n            </div>\n            <div class="pill-divider"></div>\n            <div class="pill-time"\n                 data-bind="text: toTimeStr(startTime(), endTime()), css: {\'last-child\': !removeDate}">\n\n            </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: (startTime().getMonth() === endTime().getMonth() && startTime().getFullYear() === endTime().getFullYear() && startTime().getDate() === endTime().getDate()) --\x3e\n            <div class="pill-content gap-1">\n                <div class="date"><span class="text-primary text-bold" data-bind="text: toDateStr(startTime())"></span>\n                    <span data-bind="text: toTimeStr(startTime())"></span>\n                </div>\n                <span> - </span>\n                <div class="time"><span class="text-primary text-bold" data-bind="text: toDateStr(endTime())"></span>\n                    <span data-bind="text: toTimeStr(endTime())"></span>\n                </div>\n            </div>\n\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: !!removeDate --\x3e\n            <button class="pill-icon" data-bind="click: removeDate">&#215;</button>\n            \x3c!-- /ko --\x3e\n\n        </div>\n        \x3c!-- ko if: error --\x3e\n        <div class="d-flex align-items-center gap-2">\n            <svg class="font-size-small"  viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M6.00011 0.75C6.33292 0.75 6.63996 0.925781 6.80871 1.21406L11.8712 9.83906C12.0423 10.1297 12.0423 10.4883 11.8759 10.7789C11.7095 11.0695 11.3978 11.25 11.0626 11.25H0.937611C0.602455 11.25 0.290736 11.0695 0.12433 10.7789C-0.042076 10.4883 -0.0397323 10.1273 0.129018 9.83906L5.19152 1.21406C5.36027 0.925781 5.6673 0.75 6.00011 0.75ZM6.00011 3.75C5.68839 3.75 5.43761 4.00078 5.43761 4.3125V6.9375C5.43761 7.24922 5.68839 7.5 6.00011 7.5C6.31183 7.5 6.56261 7.24922 6.56261 6.9375V4.3125C6.56261 4.00078 6.31183 3.75 6.00011 3.75ZM6.75011 9C6.75011 8.80109 6.67109 8.61032 6.53044 8.46967C6.38979 8.32902 6.19902 8.25 6.00011 8.25C5.8012 8.25 5.61043 8.32902 5.46978 8.46967C5.32913 8.61032 5.25011 8.80109 5.25011 9C5.25011 9.19891 5.32913 9.38968 5.46978 9.53033C5.61043 9.67098 5.8012 9.75 6.00011 9.75C6.19902 9.75 6.38979 9.67098 6.53044 9.53033C6.67109 9.38968 6.75011 9.19891 6.75011 9Z"\n                      fill="#B00020"/>\n            </svg>\n            <span class="text-small text-red-error" data-bind="text: error"></span>\n        </div>\n        \x3c!-- /ko --\x3e\n    '})},696:()=>{$(document).ready((function(){$("input[type=radio][name=select_template]").change((function(){var e=$(this).val(),t=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.preferences.set"},!0);$.ajax({type:"POST",dataType:"json",data:{template_set:e},url:t,success:function(e){location.reload(!0)}})})),$("input[type=radio][name=select_language]").change((function(){var e=$(this).val(),t=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.preferences.set"},!0);$.ajax({type:"POST",dataType:"json",data:{lang:e},url:t,success:function(e){location.reload(!0)}})}))}))}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(864),n(880),n(408),n(696);var e=3,t=0,a=15,o=10,i={};$(".navbar-search").removeClass("d-none"),document.location.origin,window.location.pathname.split("/")[1],$(".termAcceptDocsUrl").attr("data-bind","text: docName, attr: {'href': itemLink }"),$(".maleInput").attr("data-bind","textInput: inputCountMale, attr: {'name': malename }, value: 1"),$(".femaleInput").attr("data-bind","textInput: inputCountFemale, attr: {'name': femalename }, value: 1");var r,s=CreateUrlParams(window.location.search);function l(){var e=this;e.showErrorMessages=ko.observable(!1),e.applicationCartItems=ko.observableArray(),e.selectedResources=ko.observableArray([$("#resource_id").val()]),e.activityId=ko.observable(),e.date=ko.observableArray(),e.aboutArrangement=ko.observable(""),e.agegroupList=ko.observableArray(),e.disabledDatesList=ko.observableArray(),e.specialRequirements=ko.observable(""),e.attachment=ko.observable(),e.termAcceptDocs=ko.observableArray(),e.imageArray=ko.observableArray(),e.selectedResource=ko.observable(),e.selectedResource.subscribe((t=>{(()=>{let t=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uidocument_resource.index_images",filter_owner_id:e.selectedResource().id,length:-1},!0);$.getJSON(t,(function(t){t.ResultSet.Result.length>0&&e.imageArray(t.ResultSet.Result.map(((t,n)=>({src:phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uidocument_resource.download",id:t.id,filter_owner_id:e.selectedResource().id},!1),alt:t.description}))))}))})()})),e.resourceDescription=ko.computed((()=>{const t=e.selectedResource()?.description;if(!t)return;const n=(new DOMParser).parseFromString(t,"text/html"),a=e=>{[...e.childNodes].forEach((e=>{var t;1===e.nodeType&&(!(t=e).innerHTML.trim()||"<br>"===t.innerHTML.trim()||/^(&nbsp;|\s)*$/.test(t.innerHTML)?e.remove():a(e))}))};return a(n.body),n.body.innerHTML})),e.termAccept=ko.computed((function(){return!ko.utils.arrayFirst(e.termAcceptDocs(),(function(e){return 0==e.checkedStatus()}))})),e.termAcceptedDocs=ko.computed((function(){for(var t=[],n=0;n<e.termAcceptDocs().length;n++)e.termAcceptDocs()[n].checkedStatus()&&t.push("building::"+e.termAcceptDocs()[n].docId);return t})),e.removeDocs=function(){for(var t=e.termAcceptDocs().length,n=[],a=0;a<t;a++)n.push(e.termAcceptDocs()[a].docName);for(a=0;a<t;a++)e.removeDoc(n[a])},e.removeDoc=function(t){e.termAcceptDocs.remove((function(e){return e.docName==t}))}}function d(e,t){var n={menuaction:"bookingfrontend.uiapplication.set_block",resource_id:$("#resource_id").val(),from_:dateFormat(e,"yyyy-mm-dd HH:MM"),to_:dateFormat(t,"yyyy-mm-dd HH:MM")};$.getJSON(phpGWLink("bookingfrontend/",n,!0),(function(e){"reserved"==e.status&&(alert("Opptatt"),window.location.replace(phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uiresource.show",building_id:s.building_id,id:$("#resource_id").val()})))}))}function c(){var t=new Date,n=new Date(t.getFullYear(),t.getMonth()+e,0),a=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uibooking.get_freetime",building_id:s.building_id,resource_id:$("#resource_id").val(),start_date:formatSingleDateWithoutHours(new Date),end_date:formatSingleDateWithoutHours(n)},!0);$.getJSON(a,(function(e){for(var t in e){for(var n=0;n<e[t].length;n++)void 0!==e[t][n].applicationLink&&(e[t][n].applicationLink=phpGWLink("bookingfrontend/",e[t][n].applicationLink));i[t]=e[t]}})).done((function(){var e=$("#resource_id").val();if(void 0!==i[e]){for(var t,n,a=i[e],o=[-1],r=0;r<a.length;r++)0==a[r].overlap&&(t=new Date(parseInt(a[r].start)),n=dateFormat(t,"yyyy/mm/dd"),o.push(n));1==o.length&&($("#from_").val(""),$("#to_").val(""),$("#start_date").val(""),$("#selected_period").html("")),$("#start_date").datetimepicker("setOptions",{allowDates:o})}}))}ko.validation.locale("nb-NO"),$(document).ready((function(){var e;r=new l,ko.applyBindings(r,document.getElementById("new-application-page"));let n=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uiapplication.add",building_id:s.building_id,phpgw_return_as:"json"},!0);$.getJSON(n,(function(i){$("#inputTargetAudience").val(i.audience[0].id),e=i.application.activity_id,r.activityId(e);for(var l=0;l<i.agegroups.length;l++)r.agegroupList.push({name:i.agegroups[l].name,agegroupLabel:i.agegroups[l].name,inputCountMale:ko.observable("").extend({number:!0}),inputCountFemale:ko.observable("").extend({number:!0}),malename:"male["+i.agegroups[l].id+"]",femalename:"female["+i.agegroups[l].id+"]",id:i.agegroups[l].id});if(null!=initialAgegroups)for(l=0;l<initialAgegroups.length;l++){var u=initialAgegroups[l].agegroup_id,m=ko.utils.arrayFirst(r.agegroupList(),(function(e){return e.id==u}));m&&(m.inputCountMale(initialAgegroups[l].male),m.inputCountFemale(initialAgegroups[l].female))}for(l=0;l<i.audience.length;l++)$.inArray(i.audience[l].id,initialAudience)>-1&&$("#audienceDropdownBtn").text(i.audience[l].name),$("#inputTargetAudience").val(i.audience[l].id);if(n=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uiresource.index_json",filter_building_id:s.building_id,sort:"name",phpgw_return_as:"json"},!0),$.getJSON(n,(function(e){for(var n=0;n<e.results.length;n++)console.log($("#resource_id")),$("#resource_id").val()==e.results[n].id&&(r.selectedResource(e.results[n]),e.results[n].booking_day_default_lenght&&-1!=e.results[n].booking_day_default_lenght&&(t=e.results[n].booking_day_default_lenght),e.results[n].booking_time_default_end&&-1!=e.results[n].booking_time_default_end&&(o=e.results[n].booking_time_default_end),e.results[n].booking_time_default_start&&-1!=e.results[n].booking_time_default_start&&(a=e.results[n].booking_time_default_start),$("#resource_list").hide()),t||(o=a+1)})).done((function(){!function(){var e,n;if($("#resource_id").val()||($("#time_select").hide(),$("#item-description").html(""),$("#selected_period").html("<b>Velg leieobjekt</b>")),null!=initialDates)for(var i=0;i<initialDates.length;i++){var l=initialDates[i].from_.replace(" ","T"),u=initialDates[i].to_.replace(" ","T");r.date.push({from_:formatDateToDateTimeString(new Date(l)),to_:formatDateToDateTimeString(new Date(u)),formatedPeriode:formatDate(new Date(l),new Date(u))})}else void 0!==s.start&&void 0!==s.end&&s.start.length>0&&s.end.length>0&&r.date.push({from_:formatDateToDateTimeString(new Date(parseInt(s.start))),to_:formatDateToDateTimeString(new Date(parseInt(s.end))),formatedPeriode:formatDate(new Date(parseInt(s.start)),new Date(parseInt(s.end)))});if(null!=initialDates){for(i=0;i<initialDates.length;i++)l=initialDates[i].from_.replace(" ","T")+"Z",u=initialDates[i].to_.replace(" ","T")+"Z",e=new Date(l),n=new Date(u);initialDates.length>0&&(a=e.getHours(),o=n.getHours(),$("#start_date").datetimepicker("destroy"))}else void 0!==s.start&&void 0!==s.end&&s.start.length>0&&s.end.length>0&&(e=new Date(parseInt(s.start)),-1!=t&&0!=t||(a=e.getHours()),e.setHours(a,0),(n=new Date(parseInt(s.start))).setDate(n.getDate()+t),-1!=t&&0!=t||(n=new Date(parseInt(s.end)),o=n.getHours()),n.setHours(o,0),$("#time_select").hide());$("#resource_id").val()&&e&&($("#from_").val(formatSingleDate(e)),$("#to_").val(formatSingleDate(n)),$("#start_date").val(formatSingleDateWithoutHours(e)),$("#start_date").prop("disabled",!0),"function"==typeof post_handle_order_table&&setTimeout((function(){post_handle_order_table()}),500)),$("#bookingStartTime").val(a),$("#bookingEndTime").val(o),$("#resource_id").val()&&(c(),void 0!==e&&d(e,n))}()})),$("#resource_id").val()){var p={menuaction:"bookingfrontend.uidocument_view.regulations","owner[]":"building::"+s.building_id,sort:"name"};n=phpGWLink("bookingfrontend/",p,!0),n+="&owner[]=resource::"+$("#resource_id").val(),$.getJSON(n,(function(e){for(var t=0;t<e.data.length;t++){var n=!1;null!=initialAcceptedDocs&&"on"==initialAcceptedDocs[t]&&(n=!0),r.termAcceptDocs.push({docName:e.data[t].name,itemLink:RemoveCharacterFromURL(e.data[t].link,"amp;"),checkedStatus:ko.observable(n),docId:e.data[t].id.replace(/^\D+/g,"")})}}))}})).done((function(){"undefined"!=typeof initialAudience&&null!=initialAudience&&$("#inputTargetAudience").val(initialAudience)})),$("#application_form").submit((function(e){r.termAccept()||(alert(errorAcceptedDocs),e.preventDefault())}))})),$("#start_date").datetimepicker({onSelectDate:function(e,n){var i=new Date(e);i.setHours(a,0);var r=new Date(e);r.setDate(e.getDate()+t),r.setHours(o,0),i.getTime()<r.getTime()?($("#from_").val(formatSingleDate(i)),$("#to_").val(formatSingleDate(r)),$("#selected_period").html(formatPeriodeHours(i,r))):i.getTime()>=r.getTime()&&alert("Starttid må være tidligere enn sluttid"),d(i,r)}}),$(document).ready((function(){$("#resource_id").change((function(){if(o=10,a=15,(t=0)||(o=a+1),r.removeDocs(),$(this).val()){var n={menuaction:"bookingfrontend.uiresource.read_single",id:$(this).val()};getJsonURL=phpGWLink("bookingfrontend/",n,!0),$.getJSON(getJsonURL,(function(n){null!==n.booking_day_default_lenght&&-1!=n.booking_day_default_lenght&&(t=n.booking_day_default_lenght),null!==n.booking_time_default_end&&-1!=n.booking_time_default_end&&(o=n.booking_time_default_end),null!==n.booking_time_default_start&&-1!=n.booking_time_default_start&&(a=n.booking_time_default_start),Number(n.booking_month_horizon)>e+1&&(e=Number(n.booking_month_horizon)+1),$("#item-description").html(n.description),$("#bookingStartTime").val(a),$("#bookingEndTime").val(o),$("#from_").val(),$("#to_").val(),$("#selected_period").html("<b>Velg dato</b>"),$("#start_date").val("")})).done((function(){$("#time_select").show()})),n={menuaction:"bookingfrontend.uidocument_view.regulations","owner[]":"building::"+s.building_id,sort:"name"},getJsonURL=phpGWLink("bookingfrontend/",n,!0),getJsonURL+="&owner[]=resource::"+$("#resource_id").val(),$.getJSON(getJsonURL,(function(e){for(var t=0;t<e.data.length;t++){var n=!1;null!=initialAcceptedDocs&&"on"==initialAcceptedDocs[t]&&(n=!0),r.termAcceptDocs.push({docName:e.data[t].name,itemLink:RemoveCharacterFromURL(e.data[t].link,"amp;"),checkedStatus:ko.observable(n),docId:e.data[t].id.replace(/^\D+/g,"")})}})),c()}else $("#time_select").hide(),$("#item-description").html(""),$("#selected_period").html("<b>Velg leieobjekt</b>")}))})),window.onload=function(){const e=document.getElementById("submit-error");document.getElementById("inputTargetAudience"),form.addEventListener("submit",(function(t){$("#resource_id").val()&&$("#from_").val()||(t.preventDefault(),t.stopPropagation(),$("#inputTargetAudience").val()||$("#inputTargetAudience").val(-1),e.style.display="block",setTimeout((function(){e.style.display="none"}),5e3))}))}})()})();