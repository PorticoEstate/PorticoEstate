/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/components/application-cart.js":
/*!********************************************!*\
  !*** ./src/components/application-cart.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApplicationCart: () => (/* binding */ ApplicationCart)\n/* harmony export */ });\n/* harmony import */ var _helpers_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/util.js */ \"./src/helpers/util.js\");\n\nclass ApplicationsCartModel {\n  constructor() {\n    this.applicationCartItems = ko.observableArray([]);\n    this.applicationCartItemsEmpty = ko.observable(false);\n    this.visible = ko.observable(true);\n    this.cartElementExpanded = ko.observable(true);\n    this.initializeCart();\n  }\n  initializeCart() {\n    this.getApplicationsCartItems();\n  }\n  toggleCartExpansion() {\n    this.cartElementExpanded(!this.cartElementExpanded());\n  }\n  deleteItem(item) {\n    console.log(\"got delete request\");\n    const requestUrl = (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.phpGWLink)('bookingfrontend/', {\n      menuaction: \"bookingfrontend.uiapplication.delete_partial\"\n    }, true);\n    if (confirm('Do you want to delete this application?')) {\n      fetch(requestUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: item.id\n        })\n      }).then(response => response.json()).then(() => this.getApplicationsCartItems()).catch(error => console.error('Error:', error));\n    }\n  }\n  getApplicationsCartItems() {\n    const getJsonURL = (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.phpGWLink)('bookingfrontend/', {\n      menuaction: \"bookingfrontend.uiapplication.get_partials\"\n    }, true);\n    fetch(getJsonURL).then(response => response.json()).then(data => this.updateCartItems(data)).catch(error => console.error('Error fetching cart items:', error));\n  }\n  updateCartItems(data) {\n    const {\n      list,\n      total_sum\n    } = data;\n    if (total_sum) {\n      // document.getElementById(\"total_sum\").textContent = total_sum.toFixed(2);\n      // document.getElementById(\"total_sum_block\").style.display = 'block';\n    }\n    this.applicationCartItemsEmpty(list.length < 1);\n    this.applicationCartItems(list.map(item => {\n      return {\n        ...item,\n        dates: item.dates.map(dateObj => {\n          const currentStartDate = new Date(dateObj.from_.replace(\" \", \"T\"));\n          currentStartDate.setHours(dateObj.from_.substring(11, 13));\n          currentStartDate.setMinutes(dateObj.from_.substring(14, 16));\n          const currentEndDate = new Date(dateObj.to_.replace(\" \", \"T\"));\n          currentEndDate.setHours(dateObj.to_.substring(11, 13));\n          currentEndDate.setMinutes(dateObj.to_.substring(14, 16));\n          return {\n            date: formatSingleDateWithoutHours(currentStartDate),\n            from_: dateObj.from_,\n            to_: dateObj.to_,\n            periode: formatPeriodeHours(currentStartDate, currentEndDate)\n          };\n        }),\n        resources: ko.observableArray(item.resources.map(res => ({\n          ...res\n        }))),\n        joinedResources: item.resources.map(res => res.name).join(\", \")\n      };\n    }));\n  }\n}\nlet ApplicationCart = new ApplicationsCartModel();\n(0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.onDocumentReady)(() => {\n  const elem = document.getElementById('application-cart-container') || document.getElementById(\"applications-cart-content\");\n  if (elem) {\n    console.log(\"INITIALISING CART\");\n    ko.applyBindings(ApplicationCart, elem);\n  }\n});\n\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/application-cart.js?");

/***/ }),

/***/ "./src/components/collapsable-text.js":
/*!********************************************!*\
  !*** ./src/components/collapsable-text.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/withAfterRender */ \"./src/helpers/withAfterRender.js\");\n/* harmony import */ var _helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_0__);\n\nko.components.register('collapsable-text', {\n  viewModel: function (params) {\n    self.content = params.content;\n    self.descriptionExpanded = ko.observable(false);\n    self.contentSize = ko.observable(0);\n    self.containerSize = ko.observable(0);\n    self.contentElement = ko.observable(null);\n    self.toggleDescription = () => {\n      self.descriptionExpanded(!self.descriptionExpanded());\n    };\n    self.afterRenderContent = element => {\n      console.log(\"after element set\", element);\n      self.contentElement(element);\n    };\n    self.isActive = ko.computed(() => {\n      const elem = self.contentElement();\n      if (!elem) {\n        return true;\n      }\n      console.log(\"setting active\", elem.parentElement.scrollHeight, elem.parentElement.clientHeight);\n      return elem.parentElement.scrollHeight > elem.parentElement.clientHeight || elem.parentElement.scrollWidth > elem.parentElement.clientWidth;\n    });\n  },\n  // language=HTML\n  template: `\n        <div class=\"col-sm-12 d-flex flex-column collapsible-content collapsed-description\"\n             data-bind=\"css: {'collapsed-description-fade': !descriptionExpanded() && isActive, 'collapsed-description': !descriptionExpanded()}\">\n            <!-- ko if: content -->\n            <p data-bind=\"html: content,withAfterRender: { afterRender: afterRenderContent}\"></p>\n            <!-- /ko -->\n            <!-- ko ifnot: content -->\n            <p data-bind=\"template: { nodes: $componentTemplateNodes }, withAfterRender: { afterRender: afterRenderContent}\"></p>\n            <!-- /ko -->\n        </div>\n        <div class=\"col-sm-12 \" data-bind=\"visible: isActive\">\n            <button class=\"pe-btn  pe-btn--transparent text-secondary d-flex gap-3\"\n                    data-bind=\"click: toggleDescription\">\n                <!-- ko if: descriptionExpanded() -->\n                <span><trans params=\"group: 'bookingfrontend',tag: 'show_less'\"></span>\n                <!-- /ko -->\n                <!-- ko ifnot: descriptionExpanded() -->\n                <span><trans params=\"group: 'bookingfrontend',tag: 'show_more'\"></span>\n                <!-- /ko -->\n                <i class=\"fa\"\n                   data-bind=\"css: {'fa-chevron-up': descriptionExpanded(), 'fa-chevron-down': !descriptionExpanded()}\"></i>\n            </button>\n        </div>\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/collapsable-text.js?");

/***/ }),

/***/ "./src/components/light-box.js":
/*!*************************************!*\
  !*** ./src/components/light-box.js ***!
  \*************************************/
/***/ (() => {

eval("allowedEmbedTypes = ['embed', 'youtube', 'vimeo', 'instagram', 'url'];\nallowedMediaTypes = [...allowedEmbedTypes, 'image', 'html'];\nko.components.register('light-box', {\n  viewModel: class LightboxViewModel {\n    /**\n     * A mapping of resource IDs to their corresponding building resource details.\n     * @type {KnockoutObservableArray<{src: string, alt: string}>}\n     */\n    images = null;\n    currentIndex = ko.observable(0);\n    constructor(params) {\n      this.images = params.images; // This is an observable array\n      this.hash = this.randomHash();\n      this.settings = Object.assign(Object.assign(Object.assign({}, bootstrap.Modal.Default), bootstrap.Carousel.Default), {\n        interval: false,\n        target: '[data-toggle=\"lightbox\"]',\n        gallery: '',\n        size: 'xl',\n        constrain: true\n      });\n      this.settings = Object.assign(Object.assign({}, this.settings), params.options);\n      this.modalOptions = (() => this.setOptionsFromSettings(bootstrap.Modal.Default))();\n      this.carouselOptions = (() => this.setOptionsFromSettings(bootstrap.Carousel.Default))();\n      this.hasImages = ko.computed(() => {\n        return this.images().length > 0;\n      });\n      this.additionalImageCount = ko.computed(() => {\n        var count = this.images().length - 4;\n        return count > 0 ? count : 0;\n      });\n      this.currentImage = ko.computed(() => {\n        return this.hasImages() ? this.images()[this.currentIndex()] : {};\n      });\n      this.carouselClasses = ko.computed(() => {\n        return `lightbox-carousel carousel slide ${this.settings.size === 'fullscreen' ? 'position-absolute w-100 translate-middle top-50 start-50' : ''}`;\n      });\n      this.processedImages = ko.pureComputed(() => {\n        return this.images().map((image, i) => {\n          // Define regex patterns for Youtube and Instagram URLs\n          const youtubeRegex = /.*youtu(.be\\/|v\\/|embed\\/|watch\\?v=)([^#&?]*).*/;\n          const instagramRegex = /.*instagram.com.*/;\n\n          // Get src from image\n          let src = image.src.replace(/\\/$/, '');\n          const regex = new RegExp(`^(${allowedMediaTypes.join('|')})`, 'i');\n          const isHtml = /^html/.test(src);\n          const isForcedImage = /^image/.test(src);\n\n          // Fetch Instagram and YouTube URLs\n          const youtubeMatch = src.match(youtubeRegex);\n          const instagramMatch = src.match(instagramRegex);\n          const youtubeLink = youtubeMatch && youtubeMatch[2].length === 11 ? `https://www.youtube.com/embed/${youtubeMatch[2]}` : null;\n          const instagramEmbed = instagramMatch ? src + '/embed' : null;\n          let inner;\n          if (youtubeLink) {\n            inner = youtubeLink;\n          } else if (instagramEmbed) {\n            inner = instagramEmbed;\n          } else {\n            inner = src;\n          }\n\n          // Determine whether the src link is an image\n          const isImg = !youtubeLink && !instagramEmbed;\n          if (regex.test(src)) {\n            src = src.replace(regex, '');\n          }\n          const imgClasses = this.settings.constrain ? 'mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0' : 'h-100 w-100';\n          const params = new URLSearchParams(src.split('?')[1]);\n          let caption = params.get('caption') ? `<p class=\"lightbox-caption m-0 p-2 text-center text-white small\"><em>${params.get('caption')}</em></p>` : '';\n          let url = src;\n          if (caption) {\n            try {\n              url = new URL(src);\n              url.searchParams.delete('caption');\n              url = url.toString();\n            } catch (e) {\n              url = src;\n            }\n          }\n\n          // Returning data to use in template\n          return {\n            imgClasses: imgClasses,\n            url: url,\n            caption: caption,\n            isHtml: isHtml,\n            isForcedImage: isForcedImage,\n            isImg: isImg,\n            inner: inner\n          };\n        });\n      });\n    }\n    next = function () {\n      if (this.hasImages()) {\n        var nextIndex = this.currentIndex() < this.images().length - 1 ? this.currentIndex() + 1 : 0;\n        this.currentIndex(nextIndex);\n      }\n    };\n    prev = function () {\n      if (this.hasImages()) {\n        var prevIndex = this.currentIndex() > 0 ? this.currentIndex() - 1 : this.images().length - 1;\n        this.currentIndex(prevIndex);\n      }\n    };\n    attachArrowKeyHandlers() {\n      $(document).on('keydown', e => {\n        if (e.keyCode === 37) {\n          // Left arrow key\n          this.prev();\n        }\n        if (e.keyCode === 39) {\n          // Right arrow key\n          this.next();\n        }\n      }).detach();\n    }\n    detachArrowKeyHandlers() {\n      $(document).off('keydown');\n    }\n    openModal(index) {\n      if (this.hasImages()) {\n        this.currentIndex(index);\n        $(\"#lightboxModal\").modal('show');\n        this.attachArrowKeyHandlers();\n        $('#lightboxModal').on('hidden.bs.modal', function () {\n          this.detachArrowKeyHandlers();\n        });\n      }\n    }\n    closeModal() {\n      $(\"#lightboxModal\").modal('hide');\n    }\n    setOptionsFromSettings(obj) {\n      return Object.keys(obj).reduce((p, c) => Object.assign(p, {\n        [c]: this.settings[c]\n      }), {});\n    }\n    randomHash(length = 8) {\n      return Array.from({\n        length\n      }, () => Math.floor(Math.random() * 36).toString(36)).join('');\n    }\n  },\n  // language=HTML\n  template: `\n        <!-- ko if: hasImages -->\n        <div class=\"modal lightbox fade\" id=\"lightboxModal\" tabindex=\"-1\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-dialog-centered modal-xl\">\n                <div class=\"modal-content border-0 bg-transparent\">\n                    <div class=\"modal-body p-0\">\n                        <button type=\"button\" class=\"btn-close btn-close-white position-absolute top-0 end-0 p-3\"\n                                data-bs-dismiss=\"modal\" aria-label=\"Close\" style=\"font-size: 2rem;z-index: 2; background: none;\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <!-- Carousel code here -->\n                        <div class=\"lightbox-carousel carousel slide\"\n                             data-bind=\"css: carouselClasses, carousel: carouselOptions\">\n                            <div class=\"carousel-inner\" data-bind=\"foreach: {data: processedImages, as: 'image'}\">\n                                <div class=\"carousel-item\"\n                                     data-bind=\"css: {'active': $index() === $parent.currentIndex()}, style: { minHeight: '100px' }\">\n                                    <div class=\"position-absolute top-50 start-50 translate-middle text-white\">\n                                        <div class=\"spinner-border\" role=\"status\"></div>\n                                    </div>\n                                    <div class=\"ratio ratio-16x9\" style=\"background-color: #000;\">\n                                        <!-- ko if: image.isImg -->\n                                        <img data-bind=\"attr: { src: image.url, class: 'd-block ' + image.imgClasses + ' img-fluid', style: { 'z-index': 1, 'object-fit': 'contain' } }\"/>\n                                        <!-- /ko -->\n\n                                        <!-- ko ifnot: image.isImg -->\n                                        <iframe data-bind=\"attr: { src: image.inner, title: image.isYoutube ? 'YouTube video player' : 'Instagram Embed', frameborder: '0', allow: image.isYoutube ? 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' : '', allowfullscreen: true }\"></iframe>\n                                        <!-- /ko -->\n                                    </div>\n                                    <!-- ko if: image.caption -->\n                                    <p class=\"lightbox-caption m-0 p-2 text-center text-white small\"\n                                       data-bind=\"html: image.caption\"></p>\n                                    <!-- /ko -->\n                                </div>\n                            </div>\n                            <!-- Carousel Controls -->\n                            <!-- ko if: images().length > 0 -->\n                            <button class=\"carousel-control carousel-control-prev h-75 m-auto\" type=\"button\"\n                                    data-bs-target=\"#lightboxCarousel\" data-bs-slide=\"prev\" data-bind=\"click: prev\">\n                                <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n                                <span class=\"visually-hidden\">Previous</span>\n                            </button>\n                            <button class=\"carousel-control carousel-control-next h-75 m-auto\" type=\"button\"\n                                    data-bs-target=\"#lightboxCarousel\" data-bs-slide=\"next\" data-bind=\"click: next\">\n                                <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n                                <span class=\"visually-hidden\">Next</span>\n                            </button>\n                            <!-- /ko -->\n                        </div>\n                        <!-- You might replace it with the carousel component in bootstrap -->\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- /ko -->\n        <!-- Only display if there are images -->\n        <!-- ko if: hasImages -->\n        <div class=\"row\">\n            <!-- Iterate over the first four images or all if less than four -->\n            <!-- ko foreach: images.slice(0, 4) -->\n            <div class=\"col-md-3\">\n                <div class=\"img-container-building\">\n                    <img data-bind=\"attr: { src: src, alt: alt }, click: function() { $parent.openModal($index()) }\"\n                         class=\"img-thumbnail-building cursor-pointer\"/>\n\n                    <!-- If it's the fourth image and there are additional images, show overlay -->\n                    <!-- ko if: $index() === 3 && $parent.additionalImageCount() > 0 -->\n                    <div class=\"overlay\" data-bind=\"click: function() { $parent.openModal($index()) }\">\n                        <span class=\"additional-count\">+<!-- ko text: $parent.additionalImageCount -->\n                            <!-- /ko --></span>\n                    </div>\n                    <!-- /ko -->\n                </div>\n            </div>\n            <!-- /ko -->\n        </div>\n        <!-- /ko -->\n\n        <!-- Display message if there are no images -->\n        <!-- ko ifnot: hasImages -->\n        <div class=\"col-12\">\n            <p class=\"text-center\">No images available.</p>\n        </div>\n        <!-- /ko -->\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/light-box.js?");

/***/ }),

/***/ "./src/components/time-slot-pill.js":
/*!******************************************!*\
  !*** ./src/components/time-slot-pill.js ***!
  \******************************************/
/***/ (() => {

eval("ko.components.register('time-slot-pill', {\n  viewModel: function (params) {\n    const self = this;\n    self.schedule = params.schedule;\n    self.selectedResources = params.selectedResources;\n    self.date = params.date;\n    self.options = {\n      hour: '2-digit',\n      minute: '2-digit'\n    };\n    self.startTime = ko.computed(() => luxon.DateTime.fromFormat(self.date.from_, \"dd/MM/yyyy HH:mm\").toJSDate());\n    self.endTime = ko.computed(() => luxon.DateTime.fromFormat(self.date.to_, \"dd/MM/yyyy HH:mm\").toJSDate());\n    self.toDateStr = d => `${d.getDate()}. ${monthNamesShort[d.getMonth()].toLowerCase()}`;\n    self.toTimeStr = (start, end) => {\n      if (end) {\n        return `${start.toLocaleTimeString('no', self.options).replace(':', '.')} -\n                ${end.toLocaleTimeString('no', self.options).replace(':', '.')}`;\n      }\n      return start.toLocaleTimeString('no', self.options).replace(':', '.');\n    };\n\n    // Assuming `removeDate` is a function passed in via params\n    self.removeDate = params.removeDate;\n    self.error = ko.computed(() => {\n      if (!self.schedule || !self.selectedResources) {\n        return false;\n      }\n\n      // Convert current time slot to the expected format for comparison\n      const currentEvent = {\n        date: luxon.DateTime.fromJSDate(self.startTime()).toFormat(\"yyyy-MM-dd\"),\n        from: luxon.DateTime.fromJSDate(self.startTime()).toFormat(\"HH:mm:ss\"),\n        to: luxon.DateTime.fromJSDate(self.endTime()).toFormat(\"HH:mm:ss\"),\n        resources: self.selectedResources()\n      };\n      const overlap = self.schedule().find(event => doesEventsOverlap(currentEvent, event));\n      if (overlap) {\n        const resource = currentEvent.resources.find(res => overlap.resources.some(a => a.id === res.id));\n        return `${resource.name} ikke tilgjengelig`;\n      }\n\n      // Utility function to check overlap (adapted from provided logic)\n      function doesEventsOverlap(event1, event2) {\n        if (event1.date !== event2.date) {\n          return false; // Different days, no overlap\n        }\n        if (event2.type === 'allocation' || event2.type === 'booking') {\n          return false;\n        }\n        const isTimeOverlapping = event1.from < event2.to && event1.to > event2.from;\n        const isResourceOverlapping = event1.resources.some(resource1 => event2.resources.some(resource2 => resource1.id === resource2.id));\n        return isTimeOverlapping && isResourceOverlapping;\n      }\n    });\n  },\n  // language=HTML\n  template: `\n\n        <div class=\"pill pill--secondary\" data-bind=\"css: {'pill--error': error}\">\n            <!-- ko if: startTime().getMonth() === endTime().getMonth() && startTime().getFullYear() === endTime().getFullYear() && startTime().getDate() === endTime().getDate() -->\n            <div class=\"pill-label\">\n                <span className=\"text-primary text-bold\" data-bind=\"text: toDateStr(startTime())\"></span>\n            </div>\n            <div class=\"pill-divider\"></div>\n            <div class=\"pill-time\"\n                 data-bind=\"text: toTimeStr(startTime(), endTime()), css: {'last-child': !removeDate}\">\n\n            </div>\n            <!-- /ko -->\n            <!-- ko ifnot: (startTime().getMonth() === endTime().getMonth() && startTime().getFullYear() === endTime().getFullYear() && startTime().getDate() === endTime().getDate()) -->\n            <div class=\"pill-content gap-1\">\n                <div class=\"date\"><span class=\"text-primary text-bold\" data-bind=\"text: toDateStr(startTime())\"></span>\n                    <span data-bind=\"text: toTimeStr(startTime())\"></span>\n                </div>\n                <span> - </span>\n                <div class=\"time\"><span class=\"text-primary text-bold\" data-bind=\"text: toDateStr(endTime())\"></span>\n                    <span data-bind=\"text: toTimeStr(endTime())\"></span>\n                </div>\n            </div>\n\n            <!-- /ko -->\n\n            <!-- ko if: !!removeDate -->\n            <button class=\"pill-icon\" data-bind=\"click: removeDate\"><i class=\"pill-cross\"></i></button>\n            <!-- /ko -->\n\n        </div>\n        <!-- ko if: error -->\n        <div class=\"d-flex align-items-center gap-2\">\n            <svg class=\"font-size-small\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M6.00011 0.75C6.33292 0.75 6.63996 0.925781 6.80871 1.21406L11.8712 9.83906C12.0423 10.1297 12.0423 10.4883 11.8759 10.7789C11.7095 11.0695 11.3978 11.25 11.0626 11.25H0.937611C0.602455 11.25 0.290736 11.0695 0.12433 10.7789C-0.042076 10.4883 -0.0397323 10.1273 0.129018 9.83906L5.19152 1.21406C5.36027 0.925781 5.6673 0.75 6.00011 0.75ZM6.00011 3.75C5.68839 3.75 5.43761 4.00078 5.43761 4.3125V6.9375C5.43761 7.24922 5.68839 7.5 6.00011 7.5C6.31183 7.5 6.56261 7.24922 6.56261 6.9375V4.3125C6.56261 4.00078 6.31183 3.75 6.00011 3.75ZM6.75011 9C6.75011 8.80109 6.67109 8.61032 6.53044 8.46967C6.38979 8.32902 6.19902 8.25 6.00011 8.25C5.8012 8.25 5.61043 8.32902 5.46978 8.46967C5.32913 8.61032 5.25011 8.80109 5.25011 9C5.25011 9.19891 5.32913 9.38968 5.46978 9.53033C5.61043 9.67098 5.8012 9.75 6.00011 9.75C6.19902 9.75 6.38979 9.67098 6.53044 9.53033C6.67109 9.38968 6.75011 9.19891 6.75011 9Z\"\n                      fill=\"#B00020\"/>\n            </svg>\n            <span class=\"text-small text-red-error\" data-bind=\"text: error\"></span>\n        </div>\n        <!-- /ko -->\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/time-slot-pill.js?");

/***/ }),

/***/ "./src/helpers/translation.js":
/*!************************************!*\
  !*** ./src/helpers/translation.js ***!
  \************************************/
/***/ (() => {

eval("/**\n *\n */\n\nif (!globalThis['trans']) {\n  // Initialize translations as a Knockout observable object\n  globalThis['translations'] = ko.observable({});\n  const getJsonURL = phpGWLink('bookingfrontend/lang.php', null, true);\n  fetch(getJsonURL).then(a => a.json()).then(a => globalThis['translations'](a));\n\n  // Define the translate function\n  globalThis['trans'] = (group, tag, ...args) => {\n    // Retrieve the current value of the translations observable\n    const translations = globalThis['translations']();\n\n    // Function to process translation for a single group\n    const processTranslation = singleGroup => {\n      // Check if the group exists in the translations\n      if (translations[singleGroup] && translations[singleGroup][tag]) {\n        // Retrieve the template string for the specified group and tag\n        let template = translations[singleGroup][tag];\n\n        // Replace each placeholder with the corresponding argument\n        return template.replace(/%\\d+/g, placeholder => {\n          // Extract the number from the placeholder, convert it to index (0-based)\n          const index = parseInt(placeholder.substring(1)) - 1;\n          // Replace placeholder with the argument, if exists, otherwise keep the placeholder\n          return args[index] !== undefined ? args[index] : placeholder;\n        });\n      }\n      return null; // Indicate no translation found for this group\n    };\n\n    // Check if group is an array and try to find a translation in one of the groups\n    if (Array.isArray(group)) {\n      for (let i = 0; i < group.length; i++) {\n        const translation = processTranslation(group[i]);\n        // if(translation) {\n        //     console.log(\"found translation\", group[i], tag, translation)\n        // }\n        if (translation !== null) return translation;\n      }\n    } else {\n      // If group is not an array, process it directly\n      const translation = processTranslation(group);\n      // if(translation) {\n      //     console.log(\"found translation\", group, tag, translation)\n      // }\n      if (translation !== null) return translation;\n    }\n\n    // If no translation was found in the specified groups, and 'common' wasn't already tried, try 'common'\n    if (!Array.isArray(group) || !group.includes('common')) {\n      const commonTranslation = processTranslation('common');\n      // if(commonTranslation) {\n      //     console.log(\"found translation\", 'common', tag, translation)\n      // }\n      if (commonTranslation !== null) return commonTranslation;\n    }\n\n    // If no translation was found even in 'common', return a fallback string\n    return `Missing translation for [${Array.isArray(group) ? group.join(', ') : group}][${tag}]`;\n  };\n  class TransViewModel {\n    constructor(params, componentInfo) {\n      let translationTagParts = componentInfo.templateNodes.map(a => a.textContent);\n      if (translationTagParts.length === 1) {\n        if (translationTagParts[0].includes(':')) {\n          translationTagParts = translationTagParts[0].split(':');\n        }\n      }\n      translationTagParts = translationTagParts.map(text => text.trim());\n\n      // Adjust to handle the case where translationTagParts might not have both parts due to splitting by ':'\n      if (translationTagParts.length >= 2) {\n        this.tag = ko.observable(translationTagParts[1]);\n        this.group = ko.observable(translationTagParts[0]);\n      } else {\n        this.tag = typeof params.tag === 'function' ? params.tag : ko.observable(params.tag);\n        this.group = typeof params.group === 'function' ? params.group : ko.observable(params.group);\n      }\n\n      // Accepting suffix parameter\n      this.suffix = ko.observable(params.suffix || ''); // Default to empty if not provided\n\n      this.args = ko.observable(params.args);\n      this.translations = globalThis['translations'];\n      this.translated = ko.computed(() => {\n        if (self.translations && self.translations() && Object.keys(self.translations()).length > 0 && this.group && this.tag) {\n          let translation = globalThis['trans'](this.group(), this.tag(), this.args());\n          // Apply suffix if it exists\n          return translation + this.suffix();\n        }\n      });\n    }\n  }\n  ko.components.register('trans', {\n    viewModel: {\n      createViewModel: function (params, componentInfo) {\n        return new TransViewModel(params, componentInfo); // Create a new instance of the view model class for each component instance\n      }\n    },\n    // language=HTML\n    template: `<!--ko text: translated()--><!--/ko-->`\n  });\n\n  // console.log(\"LOADED TRANSLATIONS\", trans('tag', 'test'))\n}\n\n//# sourceURL=webpack://bookingfrontend_2/./src/helpers/translation.js?");

/***/ }),

/***/ "./src/helpers/util.js":
/*!*****************************!*\
  !*** ./src/helpers/util.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onDocumentReady: () => (/* binding */ onDocumentReady),\n/* harmony export */   phpGWLink: () => (/* binding */ phpGWLink)\n/* harmony export */ });\n/* harmony import */ var _translation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./translation */ \"./src/helpers/translation.js\");\n/* harmony import */ var _translation__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_translation__WEBPACK_IMPORTED_MODULE_0__);\n/* global monthList, months */\n\nfunction getCookie(cname) {\n  let name = cname + \"=\";\n  let decodedCookie = decodeURIComponent(document.cookie);\n  let ca = decodedCookie.split(';');\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i];\n    while (c.charAt(0) == ' ') {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n}\nvar Util = function () {\n  //Formattering\n  var format = function () {\n    var formatDateForBackend = function (date) {\n      if (date === \"\") {\n        return \"\";\n      }\n      var fDate = new Date(date);\n      return fDate.getFullYear() + \"-\" + (fDate.getMonth() + 1) + \"-\" + fDate.getDate() + \" \" + fDate.getHours() + \":\" + fDate.getMinutes() + \":\" + fDate.getSeconds() + \"\";\n    };\n    var getDateFormat = function (from, to) {\n      let ret = [];\n      let fromDate = new Date(from.replace(\" \", \"T\"));\n      let toDate = new Date(to.replace(\" \", \"T\"));\n      //\t\t\tlet fromDate = new Date(from);\n      //\t\t\tlet toDate = new Date(to);\n\n      if (fromDate.getDate() === toDate.getDate()) {\n        ret.push(fromDate.getDate() + \". \");\n        let month = monthList[fromDate.getMonth()];\n        ret.push(months[month]);\n        return ret;\n      } else {\n        ret.push(fromDate.getDate() + \".-\" + toDate.getDate() + \".\");\n        let month = monthList[fromDate.getMonth()];\n        ret.push(months[month]);\n        return ret;\n      }\n    };\n    var getTimeFormat = function (from, to) {\n      let fromDate = new Date(from.replace(\" \", \"T\"));\n      let toDate = new Date(to.replace(\" \", \"T\"));\n      //\t\t\tlet fromDate = new Date(from);\n      //\t\t\tlet toDate = new Date(to);\n      let ret;\n      ret = (fromDate.getHours() < 10 ? '0' + fromDate.getHours() : fromDate.getHours()) + \":\" + (fromDate.getMinutes() < 10 ? '0' + fromDate.getMinutes() : fromDate.getMinutes()) + \" - \" + (toDate.getHours() < 10 ? '0' + toDate.getHours() : toDate.getHours()) + \":\" + (toDate.getMinutes() < 10 ? '0' + toDate.getMinutes() : toDate.getMinutes());\n      return ret;\n    };\n    return {\n      FormatDateForBackend: formatDateForBackend,\n      GetDateFormat: getDateFormat,\n      GetTimeFormat: getTimeFormat\n    };\n  }();\n  return {\n    Format: format\n  };\n}();\n\n/**\n * Emulate phpGW's link function\n *\n * @param String strURL target URL\n * @param Object oArgs Query String args as associate array object\n * @param bool bAsJSON ask that the request be returned as JSON (experimental feature)\n * @param String baseURL (optional) Base URL to use instead of strBaseURL\n * @returns String URL\n */\nfunction phpGWLink(strURL, oArgs, bAsJSON, baseURL) {\n  // console.log(strBaseURL)\n  if (baseURL) {\n    const baseURLParts = baseURL.split('/').filter(a => a !== '' && !a.includes('http'));\n    baseURL = '//' + baseURLParts.slice(0, baseURLParts.length - 1).join('/') + '/'; // Remove last element (file name)\n  }\n  const urlParts = (baseURL || strBaseURL).split('?');\n  let newURL = urlParts[0] + strURL + '?';\n  if (oArgs == null) {\n    oArgs = new Object();\n  }\n  for (const key in oArgs) {\n    newURL += key + '=' + oArgs[key] + '&';\n  }\n  if (urlParts[1]) {\n    newURL += urlParts[1];\n  }\n  if (bAsJSON) {\n    newURL += '&phpgw_return_as=json';\n  }\n  return newURL;\n}\n$(document).ready(function () {\n  $(\"input[type=radio][name=select_template]\").change(function () {\n    var template = $(this).val();\n    var oArgs = {\n      menuaction: 'bookingfrontend.preferences.set'\n    };\n    var requestUrl = phpGWLink('bookingfrontend/', oArgs, true);\n    $.ajax({\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        template_set: template\n      },\n      url: requestUrl,\n      success: function (data) {\n        //\t\tconsole.log(data);\n        location.reload(true);\n      }\n    });\n  });\n  $(\"input[type=radio][name=select_language]\").change(function () {\n    var lang = $(this).val();\n    var oArgs = {\n      menuaction: 'bookingfrontend.preferences.set'\n    };\n    var requestUrl = phpGWLink('bookingfrontend/', oArgs, true);\n    $.ajax({\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        lang: lang\n      },\n      url: requestUrl,\n      success: function (data) {\n        location.reload(true);\n      }\n    });\n  });\n});\nfunction onDocumentReady(fn) {\n  // see if DOM is already available\n  if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n    // call on next available tick\n    setTimeout(fn, 1);\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", fn);\n  }\n}\n\n//# sourceURL=webpack://bookingfrontend_2/./src/helpers/util.js?");

/***/ }),

/***/ "./src/helpers/withAfterRender.js":
/*!****************************************!*\
  !*** ./src/helpers/withAfterRender.js ***!
  \****************************************/
/***/ (() => {

eval("ko.bindingHandlers.withAfterRender = {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var value = valueAccessor();\n    ko.applyBindingsToNode(element, {\n      visible: true\n    }, bindingContext);\n    if (value.afterRender) {\n      value.afterRender(element);\n    }\n  }\n};\n\n//# sourceURL=webpack://bookingfrontend_2/./src/helpers/withAfterRender.js?");

/***/ }),

/***/ "./src/pages/application_new_simple.js":
/*!*********************************************!*\
  !*** ./src/pages/application_new_simple.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_light_box__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/light-box */ \"./src/components/light-box.js\");\n/* harmony import */ var _components_light_box__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_components_light_box__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_time_slot_pill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/time-slot-pill */ \"./src/components/time-slot-pill.js\");\n/* harmony import */ var _components_time_slot_pill__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_components_time_slot_pill__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_collapsable_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/collapsable-text */ \"./src/components/collapsable-text.js\");\n/* harmony import */ var _helpers_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/util */ \"./src/helpers/util.js\");\n/* harmony import */ var _components_application_cart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/application-cart */ \"./src/components/application-cart.js\");\n\n\n\n\n\n\n/* global lang */\n\nvar booking_month_horizon = 3;\nvar GlobalStartTime;\nvar day_default_lenght = 0;\nvar dow_default_start = null;\nvar dow_default_end = null;\nvar time_default_start = 15;\nvar time_default_end = 10;\nvar availlableTimeSlots = {};\nvar day_default_lenght_fallback = 0;\nvar dow_default_start_fallback = null;\nvar dow_default_end_fallback = null;\nvar time_default_start_fallback = 15;\nvar time_default_end_fallback = 10;\n//var disabledDates = ko.observableArray();\n\n$(\".navbar-search\").removeClass(\"d-none\");\nvar baseURL = document.location.origin + \"/\" + window.location.pathname.split('/')[1] + \"/bookingfrontend/\";\n$(\".termAcceptDocsUrl\").attr('data-bind', \"text: docName, attr: {'href': itemLink }\");\n$(\".maleInput\").attr('data-bind', \"textInput: inputCountMale, attr: {'name': malename }, value: 1\");\n$(\".femaleInput\").attr('data-bind', \"textInput: inputCountFemale, attr: {'name': femalename }, value: 1\");\nvar urlParams = CreateUrlParams(window.location.search);\nko.validation.locale('nb-NO');\nvar am;\nfunction applicationModel() {\n  var self = this;\n  self.showErrorMessages = ko.observable(false);\n\n  // check if bc is defined\n  // if(typeof(bc) !== 'undefined') {\n  // \tself.applicationCartItems = ko.computed(function ()\n  // \t{\n  // \t\treturn bc.applicationCartItems();\n  // \t});\n  //\n  // } else {\n  self.applicationCartItems = ko.observableArray();\n  // }\n\n  self.selectedResources = ko.observableArray([$(\"#resource_id\").val()]);\n  self.activityId = ko.observable();\n  self.date = ko.observableArray();\n  self.aboutArrangement = ko.observable(\"\");\n  self.agegroupList = ko.observableArray();\n  self.disabledDatesList = ko.observableArray();\n  self.specialRequirements = ko.observable(\"\");\n  self.attachment = ko.observable();\n  self.termAcceptDocs = ko.observableArray();\n  self.imageArray = ko.observableArray();\n  self.selectedResource = ko.observable();\n\n  // self.formatTimePeriod = function (date) {\n  //\n  //     const from = luxon.DateTime.fromFormat(date.from_, \"dd/MM/yyyy HH:mm\");\n  //     const to = luxon.DateTime.fromFormat(date.to_, \"dd/MM/yyyy HH:mm\");\n  //\n  //     return FormatTimeRange(from, to);\n  //\n  // };\n\n  self.selectedResource.subscribe(newDate => {\n    const loadResourceData = () => {\n      let getJsonURL = phpGWLink('bookingfrontend/', {\n        menuaction: \"bookingfrontend.uidocument_resource.index_images\",\n        filter_owner_id: self.selectedResource().id,\n        length: -1\n      }, true);\n      $.getJSON(getJsonURL, function (result) {\n        if (result.ResultSet.Result.length > 0) {\n          self.imageArray(result.ResultSet.Result.map((img, indx) => {\n            var src = phpGWLink('bookingfrontend/', {\n              menuaction: \"bookingfrontend.uidocument_resource.download\",\n              id: img.id,\n              filter_owner_id: self.selectedResource().id\n            }, false);\n            // images.push({src, alt: ''})\n            return {\n              src,\n              alt: img.description\n            };\n          }));\n        }\n      });\n    };\n    loadResourceData();\n  });\n  self.resourceDescription = ko.computed(() => {\n    const resource = self.selectedResource();\n    if (!resource) {\n      return;\n    }\n    const lang = getCookie(\"selected_lang\") || 'no';\n    const description_json = resource.description_json;\n    const initialDesc = new DOMParser().parseFromString(description_json[lang] || description_json['no'], \"text/html\").documentElement.textContent;\n    if (!initialDesc) {\n      return;\n    }\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(initialDesc, 'text/html');\n\n    // Function to determine if an element is effectively empty\n    const isEmptyElement = element => {\n      return !element.innerHTML.trim() || element.innerHTML.trim() === '<br>' || /^(&nbsp;|\\s)*$/.test(element.innerHTML);\n    };\n\n    // Function to recursively remove empty elements\n    const removeEmptyElements = node => {\n      [...node.childNodes].forEach(child => {\n        if (child.nodeType === 1) {\n          if (isEmptyElement(child)) {\n            child.remove();\n          } else {\n            removeEmptyElements(child);\n          }\n        }\n      });\n    };\n\n    // Start the cleaning process\n    removeEmptyElements(doc.body);\n    return doc.body.innerHTML;\n  });\n\n  // self.selectedResource.subscribe((v) => console.log('aaa', v));\n  self.termAccept = ko.computed(function () {\n    var notAccepted = ko.utils.arrayFirst(self.termAcceptDocs(), function (current) {\n      return current.checkedStatus() == false;\n    });\n    if (!notAccepted) {\n      return true;\n    } else {\n      return false;\n    }\n  });\n  self.termAcceptedDocs = ko.computed(function () {\n    var list = [];\n    for (var i = 0; i < self.termAcceptDocs().length; i++) {\n      if (self.termAcceptDocs()[i].checkedStatus()) {\n        list.push(\"building::\" + self.termAcceptDocs()[i].docId);\n      }\n    }\n    return list;\n  });\n  self.removeDocs = function () {\n    var length = self.termAcceptDocs().length;\n    var temp_docs = [];\n    for (var i = 0; i < length; i++) {\n      temp_docs.push(self.termAcceptDocs()[i].docName);\n    }\n    for (var i = 0; i < length; i++) {\n      self.removeDoc(temp_docs[i]);\n    }\n  };\n  self.removeDoc = function (docName) {\n    self.termAcceptDocs.remove(function (doc) {\n      return doc.docName == docName;\n    });\n  };\n}\n$(document).ready(function () {\n  var activityId;\n  am = new applicationModel();\n  ko.applyBindings(am, document.getElementById(\"new-application-page\"));\n  let getJsonURL = phpGWLink('bookingfrontend/', {\n    menuaction: \"bookingfrontend.uiapplication.add\",\n    building_id: urlParams['building_id'],\n    phpgw_return_as: \"json\"\n  }, true);\n  $.getJSON(getJsonURL, function (result) {\n    $(\"#inputTargetAudience\").val(result.audience[0].id);\n    activityId = result.application.activity_id;\n    am.activityId(activityId);\n    for (var i = 0; i < result.agegroups.length; i++) {\n      am.agegroupList.push({\n        name: result.agegroups[i].name,\n        agegroupLabel: result.agegroups[i].name,\n        inputCountMale: ko.observable(\"\").extend({\n          number: true\n        }),\n        inputCountFemale: ko.observable(\"\").extend({\n          number: true\n        }),\n        malename: 'male[' + result.agegroups[i].id + ']',\n        femalename: 'female[' + result.agegroups[i].id + ']',\n        id: result.agegroups[i].id\n      });\n    }\n    if (initialAgegroups != null) {\n      for (var i = 0; i < initialAgegroups.length; i++) {\n        var id = initialAgegroups[i].agegroup_id;\n        var find = ko.utils.arrayFirst(am.agegroupList(), function (current) {\n          return current.id == id;\n        });\n        if (find) {\n          find.inputCountMale(initialAgegroups[i].male);\n          find.inputCountFemale(initialAgegroups[i].female);\n        }\n      }\n    }\n    for (var i = 0; i < result.audience.length; i++) {\n      if ($.inArray(result.audience[i].id, initialAudience) > -1) {\n        $(\"#audienceDropdownBtn\").text(result.audience[i].name);\n      }\n      $(\"#inputTargetAudience\").val(result.audience[i].id);\n    }\n    getJsonURL = phpGWLink('bookingfrontend/', {\n      menuaction: \"bookingfrontend.uiresource.index_json\",\n      filter_building_id: urlParams['building_id'],\n      sort: \"name\",\n      phpgw_return_as: \"json\"\n    }, true);\n    $.getJSON(getJsonURL, function (result) {\n      // console.log(result)\n      for (var i = 0; i < result.results.length; i++) {\n        // console.log(result.results[i])\n        console.log($(\"#resource_id\"));\n        if ($(\"#resource_id\").val() == result.results[i].id) {\n          am.selectedResource(result.results[i]);\n          if (result.results[i].booking_day_default_lenght && result.results[i].booking_day_default_lenght != -1) {\n            day_default_lenght = result.results[i].booking_day_default_lenght;\n          }\n          if (result.results[i].booking_time_default_end && result.results[i].booking_time_default_end != -1) {\n            time_default_end = result.results[i].booking_time_default_end;\n          }\n          if (result.results[i].booking_time_default_start && result.results[i].booking_time_default_start != -1) {\n            time_default_start = result.results[i].booking_time_default_start;\n          }\n          // $('#item-description').html('<b>' + result.results[i].name + '</b>' + result.results[i].description);\n          $('#resource_list').hide();\n\n          //\t\t\t\t\tset_conditional_translation(result.results[i].type);\n        }\n        if (!day_default_lenght) {\n          time_default_end = time_default_start + 1;\n        }\n      }\n    }).done(function () {\n      PopulatePostedDate();\n    });\n    if ($(\"#resource_id\").val()) {\n      var parameter = {\n        menuaction: \"bookingfrontend.uidocument_view.regulations\",\n        'owner[]': \"building::\" + urlParams['building_id'],\n        sort: \"name\"\n      };\n      getJsonURL = phpGWLink('bookingfrontend/', parameter, true);\n      getJsonURL += '&owner[]=resource::' + $(\"#resource_id\").val();\n      $.getJSON(getJsonURL, function (result) {\n        for (var i = 0; i < result.data.length; i++) {\n          var checked = false;\n          if (initialAcceptedDocs != null) {\n            if (initialAcceptedDocs[i] == \"on\") {\n              checked = true;\n            }\n          }\n          am.termAcceptDocs.push({\n            docName: result.data[i].name,\n            itemLink: RemoveCharacterFromURL(result.data[i].link, 'amp;'),\n            checkedStatus: ko.observable(checked),\n            docId: result.data[i].id.replace(/^\\D+/g, '')\n          });\n        }\n      });\n    }\n  }).done(function () {\n    if (typeof initialAudience !== \"undefined\" && initialAudience != null) {\n      $(\"#inputTargetAudience\").val(initialAudience);\n    }\n  });\n  $(\"#application_form\").submit(function (event) {\n    var allowSubmit = am.termAccept();\n    if (!allowSubmit) {\n      alert(errorAcceptedDocs);\n      event.preventDefault();\n    }\n  });\n});\n\n/**\n * Note: deprecated\n */\nfunction set_conditional_translation(type) {\n  if (type == 'Equipment') {\n    $('#lang_checkin').text('Utlevering');\n    $('#lang_checkout').text('Innlevering');\n  } else {\n    $('#lang_checkin').text('Innsjekk');\n    $('#lang_checkout').text('Utsjekk');\n  }\n}\nfunction PopulatePostedDate() {\n  var StartTime, EndTime;\n  if (!$(\"#resource_id\").val()) {\n    $('#time_select').hide();\n    $('#item-description').html('');\n    $('#selected_period').html('<b>Velg leieobjekt</b>');\n  }\n  if (initialDates != null) {\n    for (var i = 0; i < initialDates.length; i++) {\n      var from_ = initialDates[i].from_.replace(\" \", \"T\") + 'Z';\n      var to_ = initialDates[i].to_.replace(\" \", \"T\") + 'Z';\n      am.date.push({\n        from_: formatDateToDateTimeString(new Date(from_)),\n        to_: formatDateToDateTimeString(new Date(to_)),\n        formatedPeriode: formatDate(new Date(from_), new Date(to_))\n      });\n    }\n  } else {\n    if (typeof urlParams['start'] !== \"undefined\" && typeof urlParams['end'] !== \"undefined\") {\n      if (urlParams['start'].length > 0 && urlParams['end'].length > 0) {\n        am.date.push({\n          from_: formatDateToDateTimeString(new Date(parseInt(urlParams['start']))),\n          to_: formatDateToDateTimeString(new Date(parseInt(urlParams['end']))),\n          /*repeat: false,*/\n          formatedPeriode: formatDate(new Date(parseInt(urlParams['start'])), new Date(parseInt(urlParams['end'])))\n        });\n      }\n    }\n  }\n  if (initialDates != null) {\n    for (var i = 0; i < initialDates.length; i++) {\n      var from_ = initialDates[i].from_.replace(\" \", \"T\") + 'Z';\n      var to_ = initialDates[i].to_.replace(\" \", \"T\") + 'Z';\n      StartTime = new Date(from_);\n      EndTime = new Date(to_);\n    }\n    if (initialDates.length > 0) {\n      time_default_start = StartTime.getHours();\n      time_default_end = EndTime.getHours();\n      $('#start_date').datetimepicker('destroy');\n    }\n  } else {\n    if (typeof urlParams['start'] !== \"undefined\" && typeof urlParams['end'] !== \"undefined\") {\n      if (urlParams['start'].length > 0 && urlParams['end'].length > 0) {\n        StartTime = new Date(parseInt(urlParams['start']));\n        if (day_default_lenght == -1 || day_default_lenght == 0) {\n          time_default_start = StartTime.getHours();\n        }\n        StartTime.setHours(time_default_start, 0);\n        EndTime = new Date(parseInt(urlParams['start']));\n        EndTime.setDate(EndTime.getDate() + day_default_lenght);\n        if (day_default_lenght == -1 || day_default_lenght == 0) {\n          EndTime = new Date(parseInt(urlParams['end']));\n          time_default_end = EndTime.getHours();\n        }\n        EndTime.setHours(time_default_end, 0);\n        $('#time_select').hide();\n      }\n    }\n    //\t\telse\n    //\t\t{\n    //\t\t\tvar StartTime = new Date();\n    //\t\t\tStartTime.setHours(time_default_start, 0);\n    //\n    //\t\t\tEndTime = new Date();\n    //\t\t\tEndTime.setDate(EndTime.getDate() + day_default_lenght);\n    //\t\t\tEndTime.setHours(time_default_end, 0);\n    //\n    //\t\t}\n  }\n  if ($(\"#resource_id\").val() && StartTime) {\n    GlobalStartTime = StartTime;\n    $('#from_').val(formatSingleDate(StartTime));\n    $('#to_').val(formatSingleDate(EndTime));\n    $('#start_date').val(formatSingleDateWithoutHours(StartTime));\n    // $('#selected_period').html(formatPeriodeHours(StartTime, EndTime));\n    $('#start_date').prop('disabled', true);\n    if (typeof post_handle_order_table === 'function') {\n      setTimeout(function () {\n        post_handle_order_table();\n      }, 500);\n    }\n  }\n  $('#bookingStartTime').val(time_default_start);\n  $('#bookingEndTime').val(time_default_end);\n  if ($(\"#resource_id\").val()) {\n    getFreetime();\n    if (typeof StartTime !== 'undefined') {\n      set_block(StartTime, EndTime);\n    }\n  }\n}\nfunction set_block(StartTime, EndTime) {\n  var parameter = {\n    menuaction: \"bookingfrontend.uiapplication.set_block\",\n    resource_id: $(\"#resource_id\").val(),\n    from_: dateFormat(StartTime, 'yyyy-mm-dd' + \" HH:MM\"),\n    to_: dateFormat(EndTime, 'yyyy-mm-dd' + \" HH:MM\")\n  };\n  $.getJSON(phpGWLink('bookingfrontend/', parameter, true), function (result) {\n    if (result.status == 'reserved') {\n      alert('Opptatt');\n      window.location.replace(phpGWLink('bookingfrontend/', {\n        menuaction: \"bookingfrontend.uiresource.show\",\n        building_id: urlParams['building_id'],\n        id: $(\"#resource_id\").val()\n      }));\n    }\n  });\n}\nfunction cancel_block() {\n  var parameter = {\n    menuaction: \"bookingfrontend.uiapplication.cancel_block\",\n    resource_id: $(\"#resource_id\").val(),\n    building_id: urlParams['building_id'],\n    from_: $('#from_').val(),\n    to_: $('#to_').val()\n  };\n  window.location.replace(phpGWLink('bookingfrontend/', parameter));\n}\nfunction getFreetime() {\n  var checkDate = new Date();\n  var EndDate = new Date(checkDate.getFullYear(), checkDate.getMonth() + booking_month_horizon, 0);\n  var getJsonURL = phpGWLink('bookingfrontend/', {\n    menuaction: \"bookingfrontend.uibooking.get_freetime\",\n    building_id: urlParams['building_id'],\n    resource_id: $(\"#resource_id\").val(),\n    start_date: formatSingleDateWithoutHours(new Date()),\n    end_date: formatSingleDateWithoutHours(EndDate)\n  }, true);\n  $.getJSON(getJsonURL, function (result) {\n    for (var key in result) {\n      for (var i = 0; i < result[key].length; i++) {\n        if (typeof result[key][i].applicationLink != 'undefined') {\n          result[key][i].applicationLink = phpGWLink('bookingfrontend/', result[key][i].applicationLink);\n        }\n      }\n      availlableTimeSlots[key] = result[key];\n    }\n  }).done(function () {\n    var resource_id = $(\"#resource_id\").val();\n    //\t\tconsole.log(availlableTimeSlots);\n    if (typeof availlableTimeSlots[resource_id] != 'undefined') {\n      var TimeSlots = availlableTimeSlots[resource_id];\n      var start;\n      var allowed_dates = [-1]; // block everything\n      var AllowDate;\n      for (var i = 0; i < TimeSlots.length; i++) {\n        if (TimeSlots[i].overlap == false) {\n          start = new Date(parseInt(TimeSlots[i].start));\n          AllowDate = dateFormat(start, 'yyyy/mm/dd');\n          allowed_dates.push(AllowDate);\n        }\n      }\n      if (allowed_dates.length == 1) {\n        $('#from_').val('');\n        $('#to_').val('');\n        $('#start_date').val('');\n        $('#selected_period').html('');\n      }\n      $('#start_date').datetimepicker('setOptions', {\n        allowDates: allowed_dates\n      });\n    }\n  });\n}\nfunction validate() {}\n$('#start_date').datetimepicker({\n  onSelectDate: function (ct, $i) {\n    var StartTime = new Date(ct);\n    StartTime.setHours(time_default_start, 0);\n    var EndTime = new Date(ct);\n    EndTime.setDate(ct.getDate() + day_default_lenght);\n    EndTime.setHours(time_default_end, 0);\n    if (StartTime.getTime() < EndTime.getTime()) {\n      GlobalStartTime = StartTime;\n      $('#from_').val(formatSingleDate(StartTime));\n      $('#to_').val(formatSingleDate(EndTime));\n      $('#selected_period').html(formatPeriodeHours(StartTime, EndTime));\n    } else if (StartTime.getTime() >= EndTime.getTime()) {\n      alert(\"Starttid må være tidligere enn sluttid\");\n    }\n    set_block(StartTime, EndTime);\n  }\n});\n$(document).ready(function () {\n  $(\"#resource_id\").change(function () {\n    day_default_lenght = day_default_lenght_fallback;\n    time_default_end = time_default_end_fallback;\n    time_default_start = time_default_start_fallback;\n    dow_default_start = dow_default_start_fallback;\n    dow_default_end = dow_default_end_fallback;\n    if (!day_default_lenght) {\n      time_default_end = time_default_start + 1;\n    }\n\n    //reset...\n    am.removeDocs();\n    if (!$(this).val()) {\n      $('#time_select').hide();\n      $('#item-description').html('');\n      $('#selected_period').html('<b>Velg leieobjekt</b>');\n    } else {\n      var parameter = {\n        menuaction: \"bookingfrontend.uiresource.read_single\",\n        id: $(this).val()\n      };\n      getJsonURL = phpGWLink('bookingfrontend/', parameter, true);\n      $.getJSON(getJsonURL, function (resource) {\n        if (resource.booking_day_default_lenght !== null && resource.booking_day_default_lenght != -1) {\n          day_default_lenght = resource.booking_day_default_lenght;\n        }\n        if (resource.booking_time_default_end !== null && resource.booking_time_default_end != -1) {\n          time_default_end = resource.booking_time_default_end;\n        }\n        if (resource.booking_time_default_start !== null && resource.booking_time_default_start != -1) {\n          time_default_start = resource.booking_time_default_start;\n        }\n        if (Number(resource.booking_month_horizon) > booking_month_horizon + 1) {\n          booking_month_horizon = Number(resource.booking_month_horizon) + 1;\n        }\n\n        //\t\t\t\tset_conditional_translation(resource.type);\n        $('#item-description').html(resource.description);\n        $('#bookingStartTime').val(time_default_start);\n        $('#bookingEndTime').val(time_default_end);\n        $('#from_').val();\n        $('#to_').val();\n        $('#selected_period').html('<b>Velg dato</b>');\n        $('#start_date').val('');\n      }).done(function () {\n        $('#time_select').show();\n      });\n      var parameter = {\n        menuaction: \"bookingfrontend.uidocument_view.regulations\",\n        'owner[]': \"building::\" + urlParams['building_id'],\n        sort: \"name\"\n      };\n      getJsonURL = phpGWLink('bookingfrontend/', parameter, true);\n      getJsonURL += '&owner[]=resource::' + $(\"#resource_id\").val();\n      $.getJSON(getJsonURL, function (result) {\n        for (var i = 0; i < result.data.length; i++) {\n          var checked = false;\n          if (initialAcceptedDocs != null) {\n            if (initialAcceptedDocs[i] == \"on\") {\n              checked = true;\n            }\n          }\n          am.termAcceptDocs.push({\n            docName: result.data[i].name,\n            itemLink: RemoveCharacterFromURL(result.data[i].link, 'amp;'),\n            checkedStatus: ko.observable(checked),\n            docId: result.data[i].id.replace(/^\\D+/g, '')\n          });\n        }\n      });\n      getFreetime();\n    }\n  });\n});\nwindow.onload = function () {\n  const error = document.getElementById(\"submit-error\");\n  const targetAudience = document.getElementById(\"inputTargetAudience\");\n  const validateTargetAudience = function () {\n    if (!$(\"#inputTargetAudience\").val()) {\n      $(\"#inputTargetAudience\").val(-1);\n    }\n  };\n  const validateInputs = function () {\n    //    !eventName.value ? eventName.classList.add(\"is-invalid\") : eventName.classList.replace(\"is-invalid\", \"is-valid\") || eventName.classList.add(\"is-valid\");\n\n    //    !organizerName.value ? organizerName.classList.add(\"is-invalid\") : organizerName.classList.replace(\"is-invalid\", \"is-valid\") || organizerName.classList.add(\"is-valid\")\n  };\n  form.addEventListener(\"submit\", function (e) {\n    if (!$(\"#resource_id\").val() || !am.date()) {\n      e.preventDefault();\n      e.stopPropagation();\n      validateInputs();\n      validateTargetAudience();\n      error.style.display = \"block\";\n      setTimeout(function () {\n        error.style.display = \"none\";\n      }, 5000);\n    } else {\n      return;\n    }\n  });\n};\n\n//# sourceURL=webpack://bookingfrontend_2/./src/pages/application_new_simple.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/pages/application_new_simple.js");
/******/ 	
/******/ })()
;