(()=>{var e={864:()=>{allowedEmbedTypes=["embed","youtube","vimeo","instagram","url"],allowedMediaTypes=[...allowedEmbedTypes,"image","html"],ko.components.register("light-box",{viewModel:class{images=null;currentIndex=ko.observable(0);constructor(e){this.images=e.images,this.hash=this.randomHash(),this.settings=Object.assign(Object.assign(Object.assign({},bootstrap.Modal.Default),bootstrap.Carousel.Default),{interval:!1,target:'[data-toggle="lightbox"]',gallery:"",size:"xl",constrain:!0}),this.settings=Object.assign(Object.assign({},this.settings),e.options),this.modalOptions=(()=>this.setOptionsFromSettings(bootstrap.Modal.Default))(),this.carouselOptions=(()=>this.setOptionsFromSettings(bootstrap.Carousel.Default))(),this.hasImages=ko.computed((()=>this.images().length>0)),this.additionalImageCount=ko.computed((()=>{var e=this.images().length-4;return e>0?e:0})),this.currentImage=ko.computed((()=>this.hasImages()?this.images()[this.currentIndex()]:{})),this.carouselClasses=ko.computed((()=>"lightbox-carousel carousel slide "+("fullscreen"===this.settings.size?"position-absolute w-100 translate-middle top-50 start-50":""))),this.processedImages=ko.pureComputed((()=>this.images().map(((e,t)=>{let n=e.src.replace(/\/$/,"");const s=new RegExp(`^(${allowedMediaTypes.join("|")})`,"i"),a=/^html/.test(n),o=/^image/.test(n),i=n.match(/.*youtu(.be\/|v\/|embed\/|watch\?v=)([^#&?]*).*/),r=n.match(/.*instagram.com.*/),l=i&&11===i[2].length?`https://www.youtube.com/embed/${i[2]}`:null,d=r?n+"/embed":null;let c;c=l||d||n;const p=!l&&!d;s.test(n)&&(n=n.replace(s,""));const u=this.settings.constrain?"mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0":"h-100 w-100",m=new URLSearchParams(n.split("?")[1]);let h=m.get("caption")?`<p class="lightbox-caption m-0 p-2 text-center text-white small"><em>${m.get("caption")}</em></p>`:"",g=n;if(h)try{g=new URL(n),g.searchParams.delete("caption"),g=g.toString()}catch(e){g=n}return{imgClasses:u,url:g,caption:h,isHtml:a,isForcedImage:o,isImg:p,inner:c}}))))}next=function(){if(this.hasImages()){var e=this.currentIndex()<this.images().length-1?this.currentIndex()+1:0;this.currentIndex(e)}};prev=function(){if(this.hasImages()){var e=this.currentIndex()>0?this.currentIndex()-1:this.images().length-1;this.currentIndex(e)}};attachArrowKeyHandlers(){$(document).on("keydown",(e=>{37===e.keyCode&&this.prev(),39===e.keyCode&&this.next()})).detach()}detachArrowKeyHandlers(){$(document).off("keydown")}openModal(e){this.hasImages()&&(this.currentIndex(e),$("#lightboxModal").modal("show"),this.attachArrowKeyHandlers(),$("#lightboxModal").on("hidden.bs.modal",(function(){this.detachArrowKeyHandlers()})))}closeModal(){$("#lightboxModal").modal("hide")}setOptionsFromSettings(e){return Object.keys(e).reduce(((e,t)=>Object.assign(e,{[t]:this.settings[t]})),{})}randomHash(e=8){return Array.from({length:e},(()=>Math.floor(36*Math.random()).toString(36))).join("")}},template:'\n        \x3c!-- ko if: hasImages --\x3e\n        <div class="modal lightbox fade" id="lightboxModal" tabindex="-1" aria-hidden="true">\n            <div class="modal-dialog modal-dialog-centered modal-xl">\n                <div class="modal-content border-0 bg-transparent">\n                    <div class="modal-body p-0">\n                        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 p-3"\n                                data-bs-dismiss="modal" aria-label="Close" style="font-size: 2rem;z-index: 2; background: none;">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                        \x3c!-- Carousel code here --\x3e\n                        <div class="lightbox-carousel carousel slide"\n                             data-bind="css: carouselClasses, carousel: carouselOptions">\n                            <div class="carousel-inner" data-bind="foreach: {data: processedImages, as: \'image\'}">\n                                <div class="carousel-item"\n                                     data-bind="css: {\'active\': $index() === $parent.currentIndex()}, style: { minHeight: \'100px\' }">\n                                    <div class="position-absolute top-50 start-50 translate-middle text-white">\n                                        <div class="spinner-border" role="status"></div>\n                                    </div>\n                                    <div class="ratio ratio-16x9" style="background-color: #000;">\n                                        \x3c!-- ko if: image.isImg --\x3e\n                                        <img data-bind="attr: { src: image.url, class: \'d-block \' + image.imgClasses + \' img-fluid\', style: { \'z-index\': 1, \'object-fit\': \'contain\' } }"/>\n                                        \x3c!-- /ko --\x3e\n\n                                        \x3c!-- ko ifnot: image.isImg --\x3e\n                                        <iframe data-bind="attr: { src: image.inner, title: image.isYoutube ? \'YouTube video player\' : \'Instagram Embed\', frameborder: \'0\', allow: image.isYoutube ? \'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\' : \'\', allowfullscreen: true }"></iframe>\n                                        \x3c!-- /ko --\x3e\n                                    </div>\n                                    \x3c!-- ko if: image.caption --\x3e\n                                    <p class="lightbox-caption m-0 p-2 text-center text-white small"\n                                       data-bind="html: image.caption"></p>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                            </div>\n                            \x3c!-- Carousel Controls --\x3e\n                            \x3c!-- ko if: images().length > 0 --\x3e\n                            <button class="carousel-control carousel-control-prev h-75 m-auto" type="button"\n                                    data-bs-target="#lightboxCarousel" data-bs-slide="prev" data-bind="click: prev">\n                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n                                <span class="visually-hidden">Previous</span>\n                            </button>\n                            <button class="carousel-control carousel-control-next h-75 m-auto" type="button"\n                                    data-bs-target="#lightboxCarousel" data-bs-slide="next" data-bind="click: next">\n                                <span class="carousel-control-next-icon" aria-hidden="true"></span>\n                                <span class="visually-hidden">Next</span>\n                            </button>\n                            \x3c!-- /ko --\x3e\n                        </div>\n                        \x3c!-- You might replace it with the carousel component in bootstrap --\x3e\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- Only display if there are images --\x3e\n        \x3c!-- ko if: hasImages --\x3e\n        <div class="row">\n            \x3c!-- Iterate over the first four images or all if less than four --\x3e\n            \x3c!-- ko foreach: images.slice(0, 4) --\x3e\n            <div class="col-md-3">\n                <div class="img-container-building">\n                    <img data-bind="attr: { src: src, alt: alt }, click: function() { $parent.openModal($index()) }"\n                         class="img-thumbnail-building cursor-pointer"/>\n\n                    \x3c!-- If it\'s the fourth image and there are additional images, show overlay --\x3e\n                    \x3c!-- ko if: $index() === 3 && $parent.additionalImageCount() > 0 --\x3e\n                    <div class="overlay" data-bind="click: function() { $parent.openModal($index()) }">\n                        <span class="additional-count">+\x3c!-- ko text: $parent.additionalImageCount --\x3e\n                            \x3c!-- /ko --\x3e</span>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- Display message if there are no images --\x3e\n        \x3c!-- ko ifnot: hasImages --\x3e\n        <div class="col-12">\n            <p class="text-center">No images available.</p>\n        </div>\n        \x3c!-- /ko --\x3e\n    '})},940:()=>{if(!globalThis.trans){globalThis.translations=ko.observable({});const e=phpGWLink("bookingfrontend/lang.php",null,!0);fetch(e).then((e=>e.json())).then((e=>globalThis.translations(e))),globalThis.trans=(e,t,...n)=>{const s=globalThis.translations(),a=e=>s[e]&&s[e][t]?s[e][t].replace(/%\d+/g,(e=>{const t=parseInt(e.substring(1))-1;return void 0!==n[t]?n[t]:e})):null;if(Array.isArray(e))for(let t=0;t<e.length;t++){const n=a(e[t]);if(null!==n)return n}else{const t=a(e);if(null!==t)return t}if(!Array.isArray(e)||!e.includes("common")){const e=a("common");if(null!==e)return e}return`Missing translation for [${Array.isArray(e)?e.join(", "):e}][${t}]`};class t{constructor(e,t){let n=t.templateNodes.map((e=>e.textContent));1===n.length&&n[0].includes(":")&&(n=n[0].split(":")),n=n.map((e=>e.trim())),n.length>=2?(this.tag=ko.observable(n[1]),this.group=ko.observable(n[0])):(this.tag="function"==typeof e.tag?e.tag:ko.observable(e.tag),this.group="function"==typeof e.group?e.group:ko.observable(e.group)),this.suffix=ko.observable(e.suffix||""),this.args=ko.observable(e.args),this.translations=globalThis.translations,this.translated=ko.computed((()=>{if(self.translations&&self.translations()&&Object.keys(self.translations()).length>0&&this.group&&this.tag)return globalThis.trans(this.group(),this.tag(),this.args())+this.suffix()}))}}ko.components.register("trans",{viewModel:{createViewModel:function(e,n){return new t(e,n)}},template:"\x3c!--ko text: translated()--\x3e\x3c!--/ko--\x3e"})}},16:()=>{ko.bindingHandlers.withAfterRender={init:function(e,t,n,s,a){var o=t();ko.applyBindingsToNode(e,{visible:!0},a),o.afterRender&&o.afterRender(e)}}}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}(()=>{"use strict";n(864),ko.components.register("map-modal",{viewModel:{createViewModel:function(e,t){return(e=>{let n=t.templateNodes.map((e=>e.textContent));1===n.length&&n[0].includes("\n")&&(n=n[0].split("\n")),n=n.map((e=>{return(t=e.trim()).endsWith(",")&&(t=t.slice(0,-1)),t;var t})),self.mapParts=ko.observableArray(n),self.randomHash=ko.observable(function(e=8){return Array.from({length:e},(()=>Math.floor(36*Math.random()).toString(36))).join("")}()),self.descriptionExpanded=ko.observable(!1),self.toggleDescription=()=>{self.descriptionExpanded(!self.descriptionExpanded())},self.shortPath=ko.computed((()=>self.mapParts().slice(0,2).join(", "))),self.longPath=ko.computed((()=>`https://maps.google.com/maps?f=q&source=s_q&hl=no&output=embed&geocode=&q=${self.mapParts().join(",")}`)),self.openModal=()=>{$("#mapModal"+randomHash()).modal("show")},self.closeModal=()=>{$("#mapModal"+randomHash()).modal("hide")}})()}},template:'\n        <button type="button" class="pe-btn pe-btn--transparent link-text link-text-secondary p-0"\n                data-bind="click: function() { openModal() }">\n            <div class="text-primary d-flex gap-1 align-items-center">\n                <i class="fa-solid fa-map-pin" style="font-size: 1rem"></i>\n                <span class="text-label" data-bind="text: shortPath"></span>\n            </div>\n        </button>\n\n        <div class="modal fade" data-bind="attr: {id: \'mapModal\' + randomHash()}" tabindex="-1"\n             aria-labelledby="mapModal"\n             aria-hidden="true">\n            <div class="modal-dialog modal-xl" style="height: 100%">\n                <div class="modal-content" style="height: 80%;">\n                    <div class="modal-header border-0">\n                        <button type="button" class="btn-close text-grey-light" data-bs-dismiss="modal"\n                                aria-label="Close"></button>\n                    </div>\n                    <div class="modal-body d-flex justify-content-center pt-0 pb-4">\n                        <div style="display: flex; justify-content: center; align-items: stretch; width: 100%;">\n                            <iframe id="iframeMap" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"\n                                    style="width: 100%;" data-bind="attr:{src: longPath()}">\n                            </iframe>\n                        </div>\n                        <br/>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    '}),n(16),ko.components.register("collapsable-text",{viewModel:function(e){self.content=e.content,self.descriptionExpanded=ko.observable(!1),self.contentSize=ko.observable(0),self.containerSize=ko.observable(0),self.contentElement=ko.observable(null),self.toggleDescription=()=>{self.descriptionExpanded(!self.descriptionExpanded())},self.afterRenderContent=e=>{console.log("after element set",e),self.contentElement(e)},self.isActive=ko.computed((()=>{const e=self.contentElement();return!e||(console.log("setting active",e.parentElement.scrollHeight,e.parentElement.clientHeight),e.parentElement.scrollHeight>e.parentElement.clientHeight||e.parentElement.scrollWidth>e.parentElement.clientWidth)}))},template:'\n        <div class="col-sm-12 d-flex flex-column collapsible-content collapsed-description"\n             data-bind="css: {\'collapsed-description-fade\': !descriptionExpanded() && isActive, \'collapsed-description\': !descriptionExpanded()}">\n            \x3c!-- ko if: content --\x3e\n            <p data-bind="html: content,withAfterRender: { afterRender: afterRenderContent}"></p>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: content --\x3e\n            <p data-bind="template: { nodes: $componentTemplateNodes }, withAfterRender: { afterRender: afterRenderContent}"></p>\n            \x3c!-- /ko --\x3e\n        </div>\n        <div class="col-sm-12 " data-bind="visible: isActive">\n            <button class="pe-btn  pe-btn--transparent text-secondary d-flex gap-3"\n                    data-bind="click: toggleDescription">\n                \x3c!-- ko if: descriptionExpanded() --\x3e\n                <span><trans params="group: \'bookingfrontend\',tag: \'show_less\'"></span>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: descriptionExpanded() --\x3e\n                <span><trans params="group: \'bookingfrontend\',tag: \'show_more\'"></span>\n                \x3c!-- /ko --\x3e\n                <i class="fa"\n                   data-bind="css: {\'fa-chevron-up\': descriptionExpanded(), \'fa-chevron-down\': !descriptionExpanded()}"></i>\n            </button>\n        </div>\n    '}),n(940),$(document).ready((function(){$("input[type=radio][name=select_template]").change((function(){var e=$(this).val(),t=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.preferences.set"},!0);$.ajax({type:"POST",dataType:"json",data:{template_set:e},url:t,success:function(e){location.reload(!0)}})})),$("input[type=radio][name=select_language]").change((function(){var e=$(this).val(),t=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.preferences.set"},!0);$.ajax({type:"POST",dataType:"json",data:{lang:e},url:t,success:function(e){location.reload(!0)}})}))}));var e=2;$(".navbar-search").removeClass("d-none");var t=ko.observableArray(),s=ko.observableArray(),a=ko.observableArray(),o=[],i={},r=(new Date,document.location.origin,window.location.pathname.split("/")[1],CreateUrlParams(window.location.search));const l=new class{constructor(){this.bookableResource=t,this.imageArray=a,this.items=s,this.resourcesExpanded=ko.observable(!1),this.toggleResources=this.toggleResources.bind(this),this.isCollapseActive=ko.observable(!0),this.isRendered=ko.observable(!1),this.isRendered.subscribe((e=>console.log("render",e))),this.isCollapseActive.subscribe((e=>console.log("avtive",e)))}toggleResources(){this.resourcesExpanded(!this.resourcesExpanded())}resourcesContainerAfterRender(e){const t=e[0];this.isCollapseActive(t.parentElement.scrollHeight>t.parentElement.clientHeight||t.parentElement.scrollWidth>t.parentElement.clientWidth),this.isRendered(!0)}};ko.applyBindings(l,document.getElementById("building-page-content")),$(document).ready((function(){void 0!==r.date&&new Date(r.date),function(e){var t=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uidocument_building.index_images",filter_owner_id:e.id,length:-1},!0);$.getJSON(t,(function(t){t.ResultSet.Result.length>0&&a(t.ResultSet.Result.map(((t,n)=>{var s=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uidocument_building.download",id:t.id,filter_owner_id:e.id},!1);return console.log(t),{src:s,alt:t.description}})))}))}(r),function(n){var s=phpGWLink("bookingfrontend/",{menuaction:"bookingfrontend.uiresource.index_json",filter_building_id:n.id,sort:"sort"},!0);$.getJSON(s,(function(s){for(var a,r,l=[],d=[],c=Math.floor(Date.now()/1e3),p=0;p<s.results.length;p++){l=[],d=[],1==s.results[p].simple_booking&&s.results[p].simple_booking_start_date<c&&(s.results[p].name+="*",d.push("Forenklet booking"));for(var u=0;u<s.results[p].facilities_list.length;u++)l.push(s.results[p].facilities_list[u].name);for(u=0;u<s.results[p].activities_list.length;u++)d.push(s.results[p].activities_list[u].name);a={menuaction:"bookingfrontend.uiresource.show",id:s.results[p].id,building_id:n.id},r=phpGWLink("bookingfrontend/",a),Number(s.results[p].booking_month_horizon)>e+1&&(e=Number(s.results[p].booking_month_horizon)+1),1!==s.results[p].deactivate_application&&(t.push({name:s.results[p].name,resourceItemLink:r,facilitiesList:ko.observableArray(l),activitiesList:ko.observableArray(d),availlableTimeSlots:ko.observableArray(i[s.results[p].id])}),o.push({id:s.results[p].id,name:s.results[p].name,visible:!0}))}}))}(r)}))})()})();