/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/components/application-cart.js":
/*!********************************************!*\
  !*** ./src/components/application-cart.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApplicationCart: () => (/* binding */ ApplicationCart)\n/* harmony export */ });\n/* harmony import */ var _helpers_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/util.js */ \"./src/helpers/util.js\");\n/* harmony import */ var _shopping_basket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shopping-basket */ \"./src/components/shopping-basket.js\");\n\n\nclass ApplicationsCartModel {\n  constructor() {\n    this.applicationCartItems = ko.observableArray([]);\n    this.applicationCartItemsEmpty = ko.observable(false);\n    this.visible = ko.observable(true);\n    this.initializeCart();\n  }\n  initializeCart() {\n    this.getApplicationsCartItems();\n  }\n  deleteItem(item) {\n    console.log(\"got delete request\");\n    const requestUrl = (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.phpGWLink)('bookingfrontend/', {\n      menuaction: \"bookingfrontend.uiapplication.delete_partial\"\n    }, true);\n    if (confirm('Do you want to delete this application?')) {\n      fetch(requestUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: item.id\n        })\n      }).then(response => response.json()).then(() => this.getApplicationsCartItems()).catch(error => console.error('Error:', error));\n    }\n  }\n  getApplicationsCartItems() {\n    const getJsonURL = (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.phpGWLink)('bookingfrontend/', {\n      menuaction: \"bookingfrontend.uiapplication.get_partials\"\n    }, true);\n    fetch(getJsonURL).then(response => response.json()).then(data => this.updateCartItems(data)).catch(error => console.error('Error fetching cart items:', error));\n  }\n  updateCartItems(data) {\n    const {\n      list,\n      total_sum\n    } = data;\n    this.applicationCartItems(null);\n    if (total_sum) {\n      // document.getElementById(\"total_sum\").textContent = total_sum.toFixed(2);\n      // document.getElementById(\"total_sum_block\").style.display = 'block';\n    }\n    this.applicationCartItemsEmpty(list.length < 1);\n    this.applicationCartItems(list.map(item => {\n      return {\n        ...item,\n        dates: item.dates.map(dateObj => {\n          const currentStartDate = new Date(dateObj.from_.replace(\" \", \"T\"));\n          currentStartDate.setHours(dateObj.from_.substring(11, 13));\n          currentStartDate.setMinutes(dateObj.from_.substring(14, 16));\n          const currentEndDate = new Date(dateObj.to_.replace(\" \", \"T\"));\n          currentEndDate.setHours(dateObj.to_.substring(11, 13));\n          currentEndDate.setMinutes(dateObj.to_.substring(14, 16));\n          return {\n            date: formatSingleDateWithoutHours(currentStartDate),\n            from_: dateObj.from_,\n            to_: dateObj.to_,\n            periode: formatPeriodeHours(currentStartDate, currentEndDate)\n          };\n        }),\n        resources: ko.observableArray(item.resources.map(res => ({\n          ...res\n        }))),\n        joinedResources: item.resources.map(res => res.name).join(\", \")\n      };\n    }));\n  }\n}\nlet ApplicationCart = new ApplicationsCartModel();\n(0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.onDocumentReady)(() => {\n  const elem = document.getElementById('application-cart-container') || document.getElementById(\"applications-cart-content\");\n  if (elem) {\n    console.log(\"INITIALISING CART\");\n    ko.applyBindings(ApplicationCart, elem);\n  }\n});\n\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/application-cart.js?");

/***/ }),

/***/ "./src/components/collapsable-text.js":
/*!********************************************!*\
  !*** ./src/components/collapsable-text.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/withAfterRender */ \"./src/helpers/withAfterRender.js\");\n/* harmony import */ var _helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_0__);\n\nko.components.register('collapsable-text', {\n  viewModel: function (params) {\n    self.content = params.content;\n    self.descriptionExpanded = ko.observable(false);\n    self.contentSize = ko.observable(0);\n    self.containerSize = ko.observable(0);\n    self.contentElement = ko.observable(null);\n    self.toggleDescription = () => {\n      self.descriptionExpanded(!self.descriptionExpanded());\n    };\n    self.afterRenderContent = element => {\n      console.log(\"after element set\", element);\n      self.contentElement(element);\n    };\n    self.isActive = ko.computed(() => {\n      const elem = self.contentElement();\n      if (!elem) {\n        return true;\n      }\n      console.log(\"setting active\", elem.parentElement.scrollHeight, elem.parentElement.clientHeight);\n      return elem.parentElement.scrollHeight > elem.parentElement.clientHeight || elem.parentElement.scrollWidth > elem.parentElement.clientWidth;\n    });\n  },\n  // language=HTML\n  template: `\n        <div class=\"col-sm-12 d-flex flex-column collapsible-content collapsed-description\"\n             data-bind=\"css: {'collapsed-description-fade': !descriptionExpanded() && isActive, 'collapsed-description': !descriptionExpanded()}\">\n            <!-- ko if: content -->\n            <p data-bind=\"html: content,withAfterRender: { afterRender: afterRenderContent}\"></p>\n            <!-- /ko -->\n            <!-- ko ifnot: content -->\n            <p data-bind=\"template: { nodes: $componentTemplateNodes }, withAfterRender: { afterRender: afterRenderContent}\"></p>\n            <!-- /ko -->\n        </div>\n        <div class=\"col-sm-12 \" data-bind=\"visible: isActive\">\n            <button class=\"pe-btn  pe-btn--transparent text-secondary d-flex gap-3\"\n                    data-bind=\"click: toggleDescription\">\n                <!-- ko if: descriptionExpanded() -->\n                <span><trans params=\"group: 'bookingfrontend',tag: 'show_less'\"></span>\n                <!-- /ko -->\n                <!-- ko ifnot: descriptionExpanded() -->\n                <span><trans params=\"group: 'bookingfrontend',tag: 'show_more'\"></span>\n                <!-- /ko -->\n                <i class=\"fa\"\n                   data-bind=\"css: {'fa-chevron-up': descriptionExpanded(), 'fa-chevron-down': !descriptionExpanded()}\"></i>\n            </button>\n        </div>\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/collapsable-text.js?");

/***/ }),

/***/ "./src/components/light-box.js":
/*!*************************************!*\
  !*** ./src/components/light-box.js ***!
  \*************************************/
/***/ (() => {

eval("allowedEmbedTypes = ['embed', 'youtube', 'vimeo', 'instagram', 'url'];\nallowedMediaTypes = [...allowedEmbedTypes, 'image', 'html'];\nko.components.register('light-box', {\n  viewModel: class LightboxViewModel {\n    /**\n     * A mapping of resource IDs to their corresponding building resource details.\n     * @type {KnockoutObservableArray<{src: string, alt: string}>}\n     */\n    images = null;\n    currentIndex = ko.observable(0);\n    constructor(params) {\n      this.images = params.images; // This is an observable array\n      this.hash = this.randomHash();\n      this.settings = Object.assign(Object.assign(Object.assign({}, bootstrap.Modal.Default), bootstrap.Carousel.Default), {\n        interval: false,\n        target: '[data-toggle=\"lightbox\"]',\n        gallery: '',\n        size: 'xl',\n        constrain: true\n      });\n      this.settings = Object.assign(Object.assign({}, this.settings), params.options);\n      this.modalOptions = (() => this.setOptionsFromSettings(bootstrap.Modal.Default))();\n      this.carouselOptions = (() => this.setOptionsFromSettings(bootstrap.Carousel.Default))();\n      this.hasImages = ko.computed(() => {\n        return this.images().length > 0;\n      });\n      this.additionalImageCount = ko.computed(() => {\n        var count = this.images().length - 4;\n        return count > 0 ? count : 0;\n      });\n      this.currentImage = ko.computed(() => {\n        return this.hasImages() ? this.images()[this.currentIndex()] : {};\n      });\n      this.carouselClasses = ko.computed(() => {\n        return `lightbox-carousel carousel slide ${this.settings.size === 'fullscreen' ? 'position-absolute w-100 translate-middle top-50 start-50' : ''}`;\n      });\n      this.processedImages = ko.pureComputed(() => {\n        return this.images().map((image, i) => {\n          // Define regex patterns for Youtube and Instagram URLs\n          const youtubeRegex = /.*youtu(.be\\/|v\\/|embed\\/|watch\\?v=)([^#&?]*).*/;\n          const instagramRegex = /.*instagram.com.*/;\n\n          // Get src from image\n          let src = image.src.replace(/\\/$/, '');\n          const regex = new RegExp(`^(${allowedMediaTypes.join('|')})`, 'i');\n          const isHtml = /^html/.test(src);\n          const isForcedImage = /^image/.test(src);\n\n          // Fetch Instagram and YouTube URLs\n          const youtubeMatch = src.match(youtubeRegex);\n          const instagramMatch = src.match(instagramRegex);\n          const youtubeLink = youtubeMatch && youtubeMatch[2].length === 11 ? `https://www.youtube.com/embed/${youtubeMatch[2]}` : null;\n          const instagramEmbed = instagramMatch ? src + '/embed' : null;\n          let inner;\n          if (youtubeLink) {\n            inner = youtubeLink;\n          } else if (instagramEmbed) {\n            inner = instagramEmbed;\n          } else {\n            inner = src;\n          }\n\n          // Determine whether the src link is an image\n          const isImg = !youtubeLink && !instagramEmbed;\n          if (regex.test(src)) {\n            src = src.replace(regex, '');\n          }\n          const imgClasses = this.settings.constrain ? 'mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0' : 'h-100 w-100';\n          const params = new URLSearchParams(src.split('?')[1]);\n          let caption = params.get('caption') ? `<p class=\"lightbox-caption m-0 p-2 text-center text-white small\"><em>${params.get('caption')}</em></p>` : '';\n          let url = src;\n          if (caption) {\n            try {\n              url = new URL(src);\n              url.searchParams.delete('caption');\n              url = url.toString();\n            } catch (e) {\n              url = src;\n            }\n          }\n\n          // Returning data to use in template\n          return {\n            imgClasses: imgClasses,\n            url: url,\n            caption: caption,\n            isHtml: isHtml,\n            isForcedImage: isForcedImage,\n            isImg: isImg,\n            inner: inner\n          };\n        });\n      });\n    }\n    next = function () {\n      if (this.hasImages()) {\n        var nextIndex = this.currentIndex() < this.images().length - 1 ? this.currentIndex() + 1 : 0;\n        this.currentIndex(nextIndex);\n      }\n    };\n    prev = function () {\n      if (this.hasImages()) {\n        var prevIndex = this.currentIndex() > 0 ? this.currentIndex() - 1 : this.images().length - 1;\n        this.currentIndex(prevIndex);\n      }\n    };\n    attachArrowKeyHandlers() {\n      $(document).on('keydown', e => {\n        if (e.keyCode === 37) {\n          // Left arrow key\n          this.prev();\n        }\n        if (e.keyCode === 39) {\n          // Right arrow key\n          this.next();\n        }\n      }).detach();\n    }\n    detachArrowKeyHandlers() {\n      $(document).off('keydown');\n    }\n    openModal(index) {\n      if (this.hasImages()) {\n        this.currentIndex(index);\n        $(\"#lightboxModal\").modal('show');\n        this.attachArrowKeyHandlers();\n        $('#lightboxModal').on('hidden.bs.modal', function () {\n          this.detachArrowKeyHandlers();\n        });\n      }\n    }\n    closeModal() {\n      $(\"#lightboxModal\").modal('hide');\n    }\n    setOptionsFromSettings(obj) {\n      return Object.keys(obj).reduce((p, c) => Object.assign(p, {\n        [c]: this.settings[c]\n      }), {});\n    }\n    randomHash(length = 8) {\n      return Array.from({\n        length\n      }, () => Math.floor(Math.random() * 36).toString(36)).join('');\n    }\n  },\n  // language=HTML\n  template: `\n        <!-- ko if: hasImages -->\n        <div class=\"modal lightbox fade\" id=\"lightboxModal\" tabindex=\"-1\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-dialog-centered modal-xl\">\n                <div class=\"modal-content border-0 bg-transparent\">\n                    <div class=\"modal-body p-0\">\n                        <button type=\"button\" class=\"btn-close btn-close-white position-absolute top-0 end-0 p-3\"\n                                data-bs-dismiss=\"modal\" aria-label=\"Close\" style=\"font-size: 2rem;z-index: 2; background: none;\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <!-- Carousel code here -->\n                        <div class=\"lightbox-carousel carousel slide\"\n                             data-bind=\"css: carouselClasses, carousel: carouselOptions\">\n                            <div class=\"carousel-inner\" data-bind=\"foreach: {data: processedImages, as: 'image'}\">\n                                <div class=\"carousel-item\"\n                                     data-bind=\"css: {'active': $index() === $parent.currentIndex()}, style: { minHeight: '100px' }\">\n                                    <div class=\"position-absolute top-50 start-50 translate-middle text-white\">\n                                        <div class=\"spinner-border\" role=\"status\"></div>\n                                    </div>\n                                    <div class=\"ratio ratio-16x9\" style=\"background-color: #000;\">\n                                        <!-- ko if: image.isImg -->\n                                        <img data-bind=\"attr: { src: image.url, class: 'd-block ' + image.imgClasses + ' img-fluid', style: { 'z-index': 1, 'object-fit': 'contain' } }\"/>\n                                        <!-- /ko -->\n\n                                        <!-- ko ifnot: image.isImg -->\n                                        <iframe data-bind=\"attr: { src: image.inner, title: image.isYoutube ? 'YouTube video player' : 'Instagram Embed', frameborder: '0', allow: image.isYoutube ? 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' : '', allowfullscreen: true }\"></iframe>\n                                        <!-- /ko -->\n                                    </div>\n                                    <!-- ko if: image.caption -->\n                                    <p class=\"lightbox-caption m-0 p-2 text-center text-white small\"\n                                       data-bind=\"html: image.caption\"></p>\n                                    <!-- /ko -->\n                                </div>\n                            </div>\n                            <!-- Carousel Controls -->\n                            <!-- ko if: images().length > 0 -->\n                            <button class=\"carousel-control carousel-control-prev h-75 m-auto\" type=\"button\"\n                                    data-bs-target=\"#lightboxCarousel\" data-bs-slide=\"prev\" data-bind=\"click: prev\">\n                                <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n                                <span class=\"visually-hidden\">Previous</span>\n                            </button>\n                            <button class=\"carousel-control carousel-control-next h-75 m-auto\" type=\"button\"\n                                    data-bs-target=\"#lightboxCarousel\" data-bs-slide=\"next\" data-bind=\"click: next\">\n                                <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n                                <span class=\"visually-hidden\">Next</span>\n                            </button>\n                            <!-- /ko -->\n                        </div>\n                        <!-- You might replace it with the carousel component in bootstrap -->\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- /ko -->\n        <!-- Only display if there are images -->\n        <!-- ko if: hasImages -->\n        <div class=\"row\">\n            <!-- Iterate over the first four images or all if less than four -->\n            <!-- ko foreach: images.slice(0, 4) -->\n            <div class=\"col-md-3\">\n                <div class=\"img-container-building\">\n                    <img data-bind=\"attr: { src: src, alt: alt }, click: function() { $parent.openModal($index()) }\"\n                         class=\"img-thumbnail-building cursor-pointer\"/>\n\n                    <!-- If it's the fourth image and there are additional images, show overlay -->\n                    <!-- ko if: $index() === 3 && $parent.additionalImageCount() > 0 -->\n                    <div class=\"overlay\" data-bind=\"click: function() { $parent.openModal($index()) }\">\n                        <span class=\"additional-count\">+<!-- ko text: $parent.additionalImageCount -->\n                            <!-- /ko --></span>\n                    </div>\n                    <!-- /ko -->\n                </div>\n            </div>\n            <!-- /ko -->\n        </div>\n        <!-- /ko -->\n\n        <!-- Display message if there are no images -->\n        <!-- ko ifnot: hasImages -->\n        <div class=\"col-12\">\n            <p class=\"text-center\">No images available.</p>\n        </div>\n        <!-- /ko -->\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/light-box.js?");

/***/ }),

/***/ "./src/components/map-modal.js":
/*!*************************************!*\
  !*** ./src/components/map-modal.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _helpers_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/hash */ \"./src/helpers/hash.js\");\n\nconst removeTrailingComma = str => {\n  if (str.endsWith(',')) {\n    str = str.slice(0, -1);\n  }\n  return str;\n};\nko.components.register('map-modal', {\n  viewModel: {\n    createViewModel: function (params, componentInfo) {\n      const ViewModel = params => {\n        let mapParts = componentInfo.templateNodes.map(a => a.textContent);\n        if (mapParts.length === 1) {\n          if (mapParts[0].includes('\\n')) {\n            mapParts = mapParts[0].split('\\n');\n          }\n        }\n        mapParts = mapParts.map(text => removeTrailingComma(text.trim()));\n        self.mapParts = ko.observableArray(mapParts);\n        self.randomHash = ko.observable((0,_helpers_hash__WEBPACK_IMPORTED_MODULE_0__.GenerateRandomHash)());\n\n        // self.content = params.content\n        self.descriptionExpanded = ko.observable(false);\n        self.toggleDescription = () => {\n          self.descriptionExpanded(!self.descriptionExpanded());\n        };\n        self.shortPath = ko.computed(() => {\n          return self.mapParts().slice(0, 2).join(', ');\n        });\n        self.longPath = ko.computed(() => {\n          return `https://maps.google.com/maps?f=q&source=s_q&hl=no&output=embed&geocode=&q=${self.mapParts().join(',')}`;\n        });\n        self.openModal = () => {\n          $('#mapModal' + randomHash()).modal('show');\n        };\n        self.closeModal = () => {\n          $('#mapModal' + randomHash()).modal('hide');\n        };\n      };\n      return ViewModel(params);\n    }\n  },\n  // language=HTML\n  template: `\n        <button type=\"button\" class=\"pe-btn pe-btn--transparent link-text link-text-secondary p-0\"\n                data-bind=\"click: function() { openModal() }\">\n            <div class=\"text-primary d-flex gap-1 align-items-center\">\n                <i class=\"fa-solid fa-map-pin\" style=\"font-size: 1rem\"></i>\n                <span class=\"text-label\" data-bind=\"text: shortPath\"></span>\n            </div>\n        </button>\n\n        <div class=\"modal fade\" data-bind=\"attr: {id: 'mapModal' + randomHash()}\" tabindex=\"-1\"\n             aria-labelledby=\"mapModal\"\n             aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-xl\" style=\"height: 100%\">\n                <div class=\"modal-content\" style=\"height: 80%;\">\n                    <div class=\"modal-header border-0\">\n                        <button type=\"button\" class=\"btn-close text-grey-light\" data-bs-dismiss=\"modal\"\n                                aria-label=\"Close\"></button>\n                    </div>\n                    <div class=\"modal-body d-flex justify-content-center pt-0 pb-4\">\n                        <div style=\"display: flex; justify-content: center; align-items: stretch; width: 100%;\">\n                            <iframe id=\"iframeMap\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"\n                                    style=\"width: 100%;\" data-bind=\"attr:{src: longPath()}\">\n                            </iframe>\n                        </div>\n                        <br/>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/map-modal.js?");

/***/ }),

/***/ "./src/components/shopping-basket.js":
/*!*******************************************!*\
  !*** ./src/components/shopping-basket.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _helpers_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/util */ \"./src/helpers/util.js\");\n/* harmony import */ var _time_slot_pill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./time-slot-pill */ \"./src/components/time-slot-pill.js\");\n/* harmony import */ var _time_slot_pill__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_time_slot_pill__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass ShoppingBasketModel {\n  constructor(params) {\n    this.applicationCartItems = params.applicationCartItems;\n    this.cartElementExpanded = ko.observable(true);\n    this.popperInstance = ko.observable();\n    this.isVisible = ko.observable(false);\n    this.deleteItem = params.deleteItem;\n    this.applicationCartItems.subscribe(d => console.log(d));\n  }\n  initializePopper(element) {\n    const button = element.previousElementSibling;\n    this.popperInstance(new Popper(button, element, {\n      placement: 'bottom-end',\n      strategy: 'fixed'\n    }));\n  }\n  destroyPopperInstance() {\n    if (this.popperInstance()) {\n      this.popperInstance().destroy();\n      this.popperInstance(null);\n    }\n  }\n  togglePopper(newSate = undefined) {\n    let popperInfo = this.popperInstance();\n    if (popperInfo) {\n      this.isVisible(newSate || !this.isVisible());\n      popperInfo.update();\n    }\n  }\n  toggleCartExpansion() {\n    this.cartElementExpanded(!this.cartElementExpanded());\n  }\n  popperAttr = ko.computed(() => {\n    if (!this.isVisible) {\n      return {};\n    }\n    return this.isVisible() ? {\n      'data-show': ''\n    } : {};\n  });\n}\nko.components.register('shopping-basket', {\n  viewModel: {\n    createViewModel: (params, componentInfo) => new ShoppingBasketModel(params, componentInfo)\n  },\n  // language=HTML\n  template: `\n        <button class=\"pe-btn menu__toggler\" type=\"button\" aria-expanded=\"false\"\n                data-bind=\"click: () => togglePopper()\">\n    <span class=\"text\">\n        <i class=\"fa-solid fa-basket-shopping\"></i>\n        <span class=\"badge badge-light\" style=\"position: absolute;top: -5px;\"\n              data-bind=\"visible: applicationCartItems().length > 0, text: applicationCartItems().length\">-1\n        </span>\n    </span>\n        </button>\n        <div class=\"poppercontent\"\n             style=\"z-index: 11\"\n             data-bind=\"withAfterRender: {afterRender: (d) => initializePopper(d)}, visible: applicationCartItems().length > 0 && isVisible, attr: popperAttr()\">\n            <div class=\"dialog-container\">\n                <div class=\"dialog-header\">\n                    <span class=\"dialog-title\">Søknader klar for innsending</span>\n                    <button type=\"button\" class=\"btn-close btn-close-white\" data-bind=\"click: () => togglePopper(false)\"\n                            aria-label=\"Close\"></button>\n                </div>\n                <div class=\"dialog-ingress\">\n                    <p>Her er en oversikt over dine søknader som er klar for innsending og godkjennelse.</p>\n                </div>\n                <div class=\"dialog-content\">\n                    <!-- Content goes here -->\n                    <div class=\"article-table-wrapper\" data-bind=\"visible: cartElementExpanded\">\n                        <div data-bind=\"foreach: applicationCartItems\">\n\n                            <div class=\"article-table-header\">\n                                <div class=\"resource-name\" data-bind=\"text: building_name\"></div>\n                                <div class=\"resource-expand float-right\">\n                                    <span class=\"far fa-trash-alt mr-2\" data-bind=\"click: $parent.deleteItem\"></span>\n                                </div>\n                            </div>\n                            <div class=\"category-table\">\n                                <!-- ko foreach: { data: resources, as: 'item' } -->\n                                \n                                    <div class=\"category-header\">\n                                        <div class=\"category-article-row\">\n                                        <div class=\"category-name\" data-bind=\"text: item.name\"></div>\n                                        </div>\n                                    </div>\n\n                                <!-- /ko -->\n                                <div class=\"category-articles\">\n                                    <div class=\"category-article-row\">\n                                        <!-- ko foreach: { data: dates, as: 's' } -->\n                                        <time-slot-pill params=\"date: s\"></time-slot-pill>\n                                        <!-- /ko -->\n                                        \n                                    </div>\n                                </div>\n                                \n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"dialog-actions\">\n                <a class=\"pe-btn pe-btn-primary pe-btn-colour-primary link-text link-text-white d-flex gap-3\"\n                   data-bind=\"attr: { href: phpGWLink('bookingfrontend/', {menuaction:'bookingfrontend.uiapplication.add_contact' }, false) } \">\n                    <div class=\"text-bold\">\n                        <trans params=\"group: 'bookingfrontend', tag:'complete_applications'\"></trans>\n                    </div>\n                    <div class=\"text-bold d-flex align-items-center\">\n                        <i class=\"fa-solid fa-arrow-right-long\"></i>\n                    </div>\n                </a>\n            </div>\n        </div>\n        </div>\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/shopping-basket.js?");

/***/ }),

/***/ "./src/components/time-slot-pill.js":
/*!******************************************!*\
  !*** ./src/components/time-slot-pill.js ***!
  \******************************************/
/***/ (() => {

eval("function formatDateString(dateStr) {\n  // Regular expressions to match the input and desired formats\n  const inputFormat = /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/;\n  const desiredFormat = /^\\d{2}\\/\\d{2}\\/\\d{4} \\d{2}:\\d{2}$/;\n\n  // Check if the input matches the desired format\n  if (desiredFormat.test(dateStr)) {\n    return dateStr; // Return the input if it already matches the desired format\n  }\n\n  // Check if the input matches the initial format\n  if (inputFormat.test(dateStr)) {\n    // Parse the date components\n    const [datePart, timePart] = dateStr.split(' ');\n    const [year, month, day] = datePart.split('-');\n    const [hours, minutes] = timePart.split(':');\n\n    // Construct the desired format\n    const formattedDateStr = `${day}/${month}/${year} ${hours}:${minutes}`;\n    return formattedDateStr;\n  }\n  throw new Error('Invalid date format'); // Handle invalid input format\n}\nko.components.register('time-slot-pill', {\n  viewModel: function (params) {\n    const self = this;\n    self.schedule = params.schedule;\n    self.selectedResources = params.selectedResources;\n    console.log(params);\n    self.date = params.date;\n    self.options = {\n      hour: '2-digit',\n      minute: '2-digit'\n    };\n    console.log(self.date);\n    self.startTime = ko.computed(() => luxon.DateTime.fromFormat(formatDateString(self.date.from_), \"dd/MM/yyyy HH:mm\").toJSDate());\n    self.endTime = ko.computed(() => luxon.DateTime.fromFormat(formatDateString(self.date.to_), \"dd/MM/yyyy HH:mm\").toJSDate());\n    self.toDateStr = d => {\n      return `${d.getDate()}. ${monthNamesShort[d.getMonth()].toLowerCase()}`;\n    };\n    self.toTimeStr = (start, end) => {\n      if (end) {\n        return `${start.toLocaleTimeString('no', self.options).replace(':', '.')} -\n                ${end.toLocaleTimeString('no', self.options).replace(':', '.')}`;\n      }\n      return start.toLocaleTimeString('no', self.options).replace(':', '.');\n    };\n\n    // Assuming `removeDate` is a function passed in via params\n    self.removeDate = params.removeDate;\n    self.error = ko.computed(() => {\n      if (!self.schedule || !self.selectedResources) {\n        return false;\n      }\n\n      // Convert current time slot to the expected format for comparison\n      const currentEvent = {\n        date: luxon.DateTime.fromJSDate(self.startTime()).toFormat(\"yyyy-MM-dd\"),\n        from: luxon.DateTime.fromJSDate(self.startTime()).toFormat(\"HH:mm:ss\"),\n        to: luxon.DateTime.fromJSDate(self.endTime()).toFormat(\"HH:mm:ss\"),\n        resources: self.selectedResources()\n      };\n      const overlap = self.schedule().find(event => doesEventsOverlap(currentEvent, event));\n      if (overlap) {\n        const resource = currentEvent.resources.find(res => overlap.resources.some(a => a.id === res.id));\n        return `${resource.name} ikke tilgjengelig`;\n      }\n\n      // Utility function to check overlap (adapted from provided logic)\n      function doesEventsOverlap(event1, event2) {\n        if (event1.date !== event2.date) {\n          return false; // Different days, no overlap\n        }\n        if (event2.type === 'allocation' || event2.type === 'booking') {\n          return false;\n        }\n        const isTimeOverlapping = event1.from < event2.to && event1.to > event2.from;\n        const isResourceOverlapping = event1.resources.some(resource1 => event2.resources.some(resource2 => resource1.id === resource2.id));\n        return isTimeOverlapping && isResourceOverlapping;\n      }\n    });\n  },\n  // language=HTML\n  template: `\n\n        <div class=\"pill pill--secondary\" data-bind=\"css: {'pill--error': error}\">\n            <!-- ko if: startTime().getMonth() === endTime().getMonth() && startTime().getFullYear() === endTime().getFullYear() && startTime().getDate() === endTime().getDate() -->\n            <div class=\"pill-label\">\n                <span className=\"text-primary text-bold\" data-bind=\"text: toDateStr(startTime())\"></span>\n            </div>\n            <div class=\"pill-divider\"></div>\n            <div class=\"pill-time\"\n                 data-bind=\"text: toTimeStr(startTime(), endTime()), css: {'last-child': !removeDate}\">\n\n            </div>\n            <!-- /ko -->\n            <!-- ko ifnot: (startTime().getMonth() === endTime().getMonth() && startTime().getFullYear() === endTime().getFullYear() && startTime().getDate() === endTime().getDate()) -->\n            <div class=\"pill-content gap-1\">\n                <div class=\"date\"><span class=\"text-primary text-bold\" data-bind=\"text: toDateStr(startTime())\"></span>\n                    <span data-bind=\"text: toTimeStr(startTime())\"></span>\n                </div>\n                <span> - </span>\n                <div class=\"time\"><span class=\"text-primary text-bold\" data-bind=\"text: toDateStr(endTime())\"></span>\n                    <span data-bind=\"text: toTimeStr(endTime())\"></span>\n                </div>\n            </div>\n\n            <!-- /ko -->\n\n            <!-- ko if: !!removeDate -->\n            <button class=\"pill-icon\" data-bind=\"click: removeDate\"><i class=\"pill-cross\"></i></button>\n            <!-- /ko -->\n\n        </div>\n        <!-- ko if: error -->\n        <div class=\"d-flex align-items-center gap-2\">\n            <svg class=\"font-size-small\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M6.00011 0.75C6.33292 0.75 6.63996 0.925781 6.80871 1.21406L11.8712 9.83906C12.0423 10.1297 12.0423 10.4883 11.8759 10.7789C11.7095 11.0695 11.3978 11.25 11.0626 11.25H0.937611C0.602455 11.25 0.290736 11.0695 0.12433 10.7789C-0.042076 10.4883 -0.0397323 10.1273 0.129018 9.83906L5.19152 1.21406C5.36027 0.925781 5.6673 0.75 6.00011 0.75ZM6.00011 3.75C5.68839 3.75 5.43761 4.00078 5.43761 4.3125V6.9375C5.43761 7.24922 5.68839 7.5 6.00011 7.5C6.31183 7.5 6.56261 7.24922 6.56261 6.9375V4.3125C6.56261 4.00078 6.31183 3.75 6.00011 3.75ZM6.75011 9C6.75011 8.80109 6.67109 8.61032 6.53044 8.46967C6.38979 8.32902 6.19902 8.25 6.00011 8.25C5.8012 8.25 5.61043 8.32902 5.46978 8.46967C5.32913 8.61032 5.25011 8.80109 5.25011 9C5.25011 9.19891 5.32913 9.38968 5.46978 9.53033C5.61043 9.67098 5.8012 9.75 6.00011 9.75C6.19902 9.75 6.38979 9.67098 6.53044 9.53033C6.67109 9.38968 6.75011 9.19891 6.75011 9Z\"\n                      fill=\"#B00020\"/>\n            </svg>\n            <span class=\"text-small text-red-error\" data-bind=\"text: error\"></span>\n        </div>\n        <!-- /ko -->\n    `\n});\n\n//# sourceURL=webpack://bookingfrontend_2/./src/components/time-slot-pill.js?");

/***/ }),

/***/ "./src/helpers/hash.js":
/*!*****************************!*\
  !*** ./src/helpers/hash.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GenerateRandomHash: () => (/* binding */ GenerateRandomHash)\n/* harmony export */ });\nfunction GenerateRandomHash(length = 8) {\n  return Array.from({\n    length\n  }, () => Math.floor(Math.random() * 36).toString(36)).join('');\n}\n\n//# sourceURL=webpack://bookingfrontend_2/./src/helpers/hash.js?");

/***/ }),

/***/ "./src/helpers/translation.js":
/*!************************************!*\
  !*** ./src/helpers/translation.js ***!
  \************************************/
/***/ (() => {

eval("/**\n *\n */\n\nif (!globalThis['trans']) {\n  // Initialize translations as a Knockout observable object\n  globalThis['translations'] = ko.observable({});\n  const getJsonURL = phpGWLink('bookingfrontend/lang.php', null, true);\n  fetch(getJsonURL).then(a => a.json()).then(a => globalThis['translations'](a));\n\n  // Define the translate function\n  globalThis['trans'] = (group, tag, ...args) => {\n    // Retrieve the current value of the translations observable\n    const translations = globalThis['translations']();\n\n    // Function to process translation for a single group\n    const processTranslation = singleGroup => {\n      // Check if the group exists in the translations\n      if (translations[singleGroup] && translations[singleGroup][tag]) {\n        // Retrieve the template string for the specified group and tag\n        let template = translations[singleGroup][tag];\n\n        // Replace each placeholder with the corresponding argument\n        return template.replace(/%\\d+/g, placeholder => {\n          // Extract the number from the placeholder, convert it to index (0-based)\n          const index = parseInt(placeholder.substring(1)) - 1;\n          // Replace placeholder with the argument, if exists, otherwise keep the placeholder\n          return args[index] !== undefined ? args[index] : placeholder;\n        });\n      }\n      return null; // Indicate no translation found for this group\n    };\n\n    // Check if group is an array and try to find a translation in one of the groups\n    if (Array.isArray(group)) {\n      for (let i = 0; i < group.length; i++) {\n        const translation = processTranslation(group[i]);\n        // if(translation) {\n        //     console.log(\"found translation\", group[i], tag, translation)\n        // }\n        if (translation !== null) return translation;\n      }\n    } else {\n      // If group is not an array, process it directly\n      const translation = processTranslation(group);\n      // if(translation) {\n      //     console.log(\"found translation\", group, tag, translation)\n      // }\n      if (translation !== null) return translation;\n    }\n\n    // If no translation was found in the specified groups, and 'common' wasn't already tried, try 'common'\n    if (!Array.isArray(group) || !group.includes('common')) {\n      const commonTranslation = processTranslation('common');\n      // if(commonTranslation) {\n      //     console.log(\"found translation\", 'common', tag, translation)\n      // }\n      if (commonTranslation !== null) return commonTranslation;\n    }\n\n    // If no translation was found even in 'common', return a fallback string\n    return `Missing translation for [${Array.isArray(group) ? group.join(', ') : group}][${tag}]`;\n  };\n  class TransViewModel {\n    constructor(params, componentInfo) {\n      let translationTagParts = componentInfo.templateNodes.map(a => a.textContent);\n      if (translationTagParts.length === 1) {\n        if (translationTagParts[0].includes(':')) {\n          translationTagParts = translationTagParts[0].split(':');\n        }\n      }\n      translationTagParts = translationTagParts.map(text => text.trim());\n\n      // Adjust to handle the case where translationTagParts might not have both parts due to splitting by ':'\n      if (translationTagParts.length >= 2) {\n        this.tag = ko.observable(translationTagParts[1]);\n        this.group = ko.observable(translationTagParts[0]);\n      } else {\n        this.tag = typeof params.tag === 'function' ? params.tag : ko.observable(params.tag);\n        this.group = typeof params.group === 'function' ? params.group : ko.observable(params.group);\n      }\n\n      // Accepting suffix parameter\n      this.suffix = ko.observable(params.suffix || ''); // Default to empty if not provided\n\n      this.args = ko.observable(params.args);\n      this.translations = globalThis['translations'];\n      this.translated = ko.computed(() => {\n        if (self.translations && self.translations() && Object.keys(self.translations()).length > 0 && this.group && this.tag) {\n          let translation = globalThis['trans'](this.group(), this.tag(), this.args());\n          // Apply suffix if it exists\n          return translation + this.suffix();\n        }\n      });\n    }\n  }\n  ko.components.register('trans', {\n    viewModel: {\n      createViewModel: function (params, componentInfo) {\n        return new TransViewModel(params, componentInfo); // Create a new instance of the view model class for each component instance\n      }\n    },\n    // language=HTML\n    template: `<!--ko text: translated()--><!--/ko-->`\n  });\n\n  // console.log(\"LOADED TRANSLATIONS\", trans('tag', 'test'))\n}\n\n//# sourceURL=webpack://bookingfrontend_2/./src/helpers/translation.js?");

/***/ }),

/***/ "./src/helpers/util.js":
/*!*****************************!*\
  !*** ./src/helpers/util.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onDocumentReady: () => (/* binding */ onDocumentReady),\n/* harmony export */   phpGWLink: () => (/* binding */ phpGWLink)\n/* harmony export */ });\n/* harmony import */ var _translation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./translation */ \"./src/helpers/translation.js\");\n/* harmony import */ var _translation__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_translation__WEBPACK_IMPORTED_MODULE_0__);\n/* global monthList, months */\n\nfunction getCookie(cname) {\n  let name = cname + \"=\";\n  let decodedCookie = decodeURIComponent(document.cookie);\n  let ca = decodedCookie.split(';');\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i];\n    while (c.charAt(0) == ' ') {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n}\nvar Util = function () {\n  //Formattering\n  var format = function () {\n    var formatDateForBackend = function (date) {\n      if (date === \"\") {\n        return \"\";\n      }\n      var fDate = new Date(date);\n      return fDate.getFullYear() + \"-\" + (fDate.getMonth() + 1) + \"-\" + fDate.getDate() + \" \" + fDate.getHours() + \":\" + fDate.getMinutes() + \":\" + fDate.getSeconds() + \"\";\n    };\n    var getDateFormat = function (from, to) {\n      let ret = [];\n      let fromDate = new Date(from.replace(\" \", \"T\"));\n      let toDate = new Date(to.replace(\" \", \"T\"));\n      //\t\t\tlet fromDate = new Date(from);\n      //\t\t\tlet toDate = new Date(to);\n\n      if (fromDate.getDate() === toDate.getDate()) {\n        ret.push(fromDate.getDate() + \". \");\n        let month = monthList[fromDate.getMonth()];\n        ret.push(months[month]);\n        return ret;\n      } else {\n        ret.push(fromDate.getDate() + \".-\" + toDate.getDate() + \".\");\n        let month = monthList[fromDate.getMonth()];\n        ret.push(months[month]);\n        return ret;\n      }\n    };\n    var getTimeFormat = function (from, to) {\n      let fromDate = new Date(from.replace(\" \", \"T\"));\n      let toDate = new Date(to.replace(\" \", \"T\"));\n      //\t\t\tlet fromDate = new Date(from);\n      //\t\t\tlet toDate = new Date(to);\n      let ret;\n      ret = (fromDate.getHours() < 10 ? '0' + fromDate.getHours() : fromDate.getHours()) + \":\" + (fromDate.getMinutes() < 10 ? '0' + fromDate.getMinutes() : fromDate.getMinutes()) + \" - \" + (toDate.getHours() < 10 ? '0' + toDate.getHours() : toDate.getHours()) + \":\" + (toDate.getMinutes() < 10 ? '0' + toDate.getMinutes() : toDate.getMinutes());\n      return ret;\n    };\n    return {\n      FormatDateForBackend: formatDateForBackend,\n      GetDateFormat: getDateFormat,\n      GetTimeFormat: getTimeFormat\n    };\n  }();\n  return {\n    Format: format\n  };\n}();\n\n/**\n * Emulate phpGW's link function\n *\n * @param String strURL target URL\n * @param Object oArgs Query String args as associate array object\n * @param bool bAsJSON ask that the request be returned as JSON (experimental feature)\n * @param String baseURL (optional) Base URL to use instead of strBaseURL\n * @returns String URL\n */\nfunction phpGWLink(strURL, oArgs, bAsJSON, baseURL) {\n  // console.log(strBaseURL)\n  if (baseURL) {\n    const baseURLParts = baseURL.split('/').filter(a => a !== '' && !a.includes('http'));\n    baseURL = '//' + baseURLParts.slice(0, baseURLParts.length - 1).join('/') + '/'; // Remove last element (file name)\n  }\n  const urlParts = (baseURL || strBaseURL).split('?');\n  let newURL = urlParts[0] + strURL + '?';\n  if (oArgs == null) {\n    oArgs = new Object();\n  }\n  for (const key in oArgs) {\n    newURL += key + '=' + oArgs[key] + '&';\n  }\n  if (urlParts[1]) {\n    newURL += urlParts[1];\n  }\n  if (bAsJSON) {\n    newURL += '&phpgw_return_as=json';\n  }\n  return newURL;\n}\n$(document).ready(function () {\n  $(\"input[type=radio][name=select_template]\").change(function () {\n    var template = $(this).val();\n    var oArgs = {\n      menuaction: 'bookingfrontend.preferences.set'\n    };\n    var requestUrl = phpGWLink('bookingfrontend/', oArgs, true);\n    $.ajax({\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        template_set: template\n      },\n      url: requestUrl,\n      success: function (data) {\n        //\t\tconsole.log(data);\n        location.reload(true);\n      }\n    });\n  });\n  $(\"input[type=radio][name=select_language]\").change(function () {\n    var lang = $(this).val();\n    var oArgs = {\n      menuaction: 'bookingfrontend.preferences.set'\n    };\n    var requestUrl = phpGWLink('bookingfrontend/', oArgs, true);\n    $.ajax({\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        lang: lang\n      },\n      url: requestUrl,\n      success: function (data) {\n        location.reload(true);\n      }\n    });\n  });\n});\nfunction onDocumentReady(fn) {\n  // see if DOM is already available\n  if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n    // call on next available tick\n    setTimeout(fn, 1);\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", fn);\n  }\n}\n\n//# sourceURL=webpack://bookingfrontend_2/./src/helpers/util.js?");

/***/ }),

/***/ "./src/helpers/withAfterRender.js":
/*!****************************************!*\
  !*** ./src/helpers/withAfterRender.js ***!
  \****************************************/
/***/ (() => {

eval("ko.bindingHandlers.withAfterRender = {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var value = ko.unwrap(valueAccessor()); // Ensure unwrapped value if observable\n\n    ko.applyBindingsToNode(element, {\n      visible: true\n    }, bindingContext);\n    if (value && value.afterRender) {\n      value.afterRender.call(viewModel, element);\n    }\n  }\n};\n\n//# sourceURL=webpack://bookingfrontend_2/./src/helpers/withAfterRender.js?");

/***/ }),

/***/ "./src/pages/building.js":
/*!*******************************!*\
  !*** ./src/pages/building.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_light_box__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/light-box */ \"./src/components/light-box.js\");\n/* harmony import */ var _components_light_box__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_components_light_box__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_map_modal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/map-modal */ \"./src/components/map-modal.js\");\n/* harmony import */ var _components_collapsable_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/collapsable-text */ \"./src/components/collapsable-text.js\");\n/* harmony import */ var _helpers_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/util */ \"./src/helpers/util.js\");\n/* harmony import */ var _helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/withAfterRender */ \"./src/helpers/withAfterRender.js\");\n/* harmony import */ var _helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_helpers_withAfterRender__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _components_application_cart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/application-cart */ \"./src/components/application-cart.js\");\n\n\n\n\n\n\nvar booking_month_horizon = 2;\n$(\".navbar-search\").removeClass(\"d-none\");\nvar bookableResources = ko.observableArray();\nvar events = ko.observableArray();\nvar imageArray = ko.observableArray();\nvar resourceIds = [];\nvar availlableTimeSlots = {};\nvar date = new Date();\nvar baseURL = document.location.origin + \"/\" + window.location.pathname.split('/')[1] + \"/bookingfrontend/\";\nvar urlParams = CreateUrlParams(window.location.search);\n\n/**\n * Represents a model for building management, encapsulating resources and events.\n */\nclass BuildingModel {\n  constructor() {\n    this.bookableResource = bookableResources;\n    this.imageArray = imageArray;\n    this.items = events;\n    this.resourcesExpanded = ko.observable(false);\n    this.toggleResources = this.toggleResources.bind(this);\n    this.isCollapseActive = ko.observable(true);\n    this.isRendered = ko.observable(false);\n    this.isRendered.subscribe(v => console.log('render', v));\n    this.isCollapseActive.subscribe(v => console.log('avtive', v));\n    // this.isCollapseActive2 = ko.computed(() => {\n    // \tif(!this.resourcesContainer) {\n    // \t\treturn true;\n    // \t}\n    // \tconst elem = this.resourcesContainer();\n    // \tif (!elem) {\n    // \t\treturn true;\n    // \t}\n    // \tconsole.log(elem, elem.scrollHeight, elem.clientHeight)\n    //\n    // \treturn (elem.parentElement.scrollHeight > elem.parentElement.clientHeight || elem.parentElement.scrollWidth > elem.parentElement.clientWidth)\n    // })\n  }\n  /**\n   * Toggles the visibility of additional resources.\n   */\n  toggleResources() {\n    this.resourcesExpanded(!this.resourcesExpanded());\n  }\n  resourcesContainerAfterRender(changes) {\n    const elem = changes[0];\n    // console.log(\"YOLO\", elem[0].parentElement)\n    // console.log(elem[0].parentElement, elem[0].parentElement.scrollHeight, elem[0].parentElement.clientHeight)\n    this.isCollapseActive(elem.parentElement.scrollHeight > elem.parentElement.clientHeight || elem.parentElement.scrollWidth > elem.parentElement.clientWidth);\n    this.isRendered(true);\n    // this.resourcesContainer(elem);\n  }\n}\nconst buildingModel = new BuildingModel();\nko.applyBindings(buildingModel, document.getElementById('building-page-content'));\n$(document).ready(function () {\n  //urlParams = new URLSearchParams(window.location.search); //not ie supported\n  if (typeof urlParams['date'] !== \"undefined\") {\n    date = new Date(urlParams['date']);\n  }\n  PopulateBuildingData(urlParams);\n  PopulateBookableResources(urlParams);\n});\nfunction PopulateBuildingData(urlParams) {\n  var getJsonURL = phpGWLink('bookingfrontend/', {\n    menuaction: \"bookingfrontend.uidocument_building.index_images\",\n    filter_owner_id: urlParams['id'],\n    length: -1\n  }, true);\n  $.getJSON(getJsonURL, function (result) {\n    if (result.ResultSet.Result.length > 0) {\n      imageArray(result.ResultSet.Result.map((img, indx) => {\n        var src = phpGWLink('bookingfrontend/', {\n          menuaction: \"bookingfrontend.uidocument_building.download\",\n          id: img.id,\n          filter_owner_id: urlParams['id']\n        }, false);\n        // images.push({src, alt: ''})\n        console.log(img);\n        return {\n          src,\n          alt: img.description\n        };\n      }));\n    }\n  });\n}\nfunction PopulateBookableResources(urlParams) {\n  var getJsonURL = phpGWLink('bookingfrontend/', {\n    menuaction: \"bookingfrontend.uiresource.index_json\",\n    filter_building_id: urlParams['id'],\n    sort: 'sort'\n  }, true);\n  $.getJSON(getJsonURL, function (result) {\n    var oArgs;\n    var resourceItemLink;\n    var facilitiesList = [];\n    var activitiesList = [];\n    var now = Math.floor(Date.now() / 1000);\n    for (var i = 0; i < result.results.length; i++) {\n      facilitiesList = [];\n      activitiesList = [];\n      if (result.results[i].simple_booking == 1 && result.results[i].simple_booking_start_date < now) {\n        result.results[i].name += '*';\n        activitiesList.push('Forenklet booking');\n      }\n      for (var k = 0; k < result.results[i].facilities_list.length; k++) {\n        facilitiesList.push(result.results[i].facilities_list[k].name);\n      }\n      for (var k = 0; k < result.results[i].activities_list.length; k++) {\n        activitiesList.push(result.results[i].activities_list[k].name);\n      }\n      oArgs = {\n        menuaction: 'bookingfrontend.uiresource.show',\n        id: result.results[i].id,\n        building_id: urlParams['id']\n      };\n      resourceItemLink = phpGWLink('bookingfrontend/', oArgs);\n      if (Number(result.results[i].booking_month_horizon) > booking_month_horizon + 1) {\n        booking_month_horizon = Number(result.results[i].booking_month_horizon) + 1;\n      }\n      if (result.results[i].deactivate_application !== 1) {\n        bookableResources.push({\n          name: result.results[i].name,\n          resourceItemLink: resourceItemLink,\n          facilitiesList: ko.observableArray(facilitiesList),\n          activitiesList: ko.observableArray(activitiesList),\n          availlableTimeSlots: ko.observableArray(availlableTimeSlots[result.results[i].id])\n        });\n        resourceIds.push({\n          id: result.results[i].id,\n          name: result.results[i].name,\n          visible: true\n        });\n      }\n    }\n  });\n}\nfunction EventsOptionsChanged(resource, checkValue) {\n  $(\".scheduler-event\").each(function (index) {\n    //console.log(index + \": \" + $(this).text());\n    if ($(this).find(\".event-id\").attr(\"value\") == resource) {\n      if (checkValue && checkValue != undefined) {\n        $(this).removeClass(\"scheduler-event-hidden\");\n      } else if (!checkValue && checkValue != undefined) {\n        $(this).addClass(\"scheduler-event-hidden\");\n      }\n    }\n  });\n}\n\n//# sourceURL=webpack://bookingfrontend_2/./src/pages/building.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/pages/building.js");
/******/ 	
/******/ })()
;