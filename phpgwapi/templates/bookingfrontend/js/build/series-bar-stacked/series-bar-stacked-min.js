YUI.add("series-bar-stacked",function(e,t){var i=e.Lang;e.StackedBarSeries=e.Base.create("stackedBarSeries",e.BarSeries,[e.StackingUtil],{drawSeries:function(){if(!(this.get("xcoords").length<1)){var e,t,r,s,l,h,a=i.isNumber,o=this._copyObject(this.get("styles").marker),g=o.width,c=o.height,n=this.get("xcoords"),d=this.get("ycoords"),f=0,u=n.length,_=d[0],p=this.get("seriesTypeCollection"),b=this.get("order"),O=this.get("graphOrder"),k=0===b,v=u*c,y={width:[],height:[]},m=[],B=[],S=this.get("groupMarkers");for(i.isArray(o.fill.color)&&(l=o.fill.color.concat()),i.isArray(o.border.color)&&(h=o.border.color.concat()),this._createMarkerCache(),v>this.get("height")&&(c*=this.get("height")/v,c=Math.max(c,1)),k?(r=[],s=[]):(r=(t=p[b-1]).get("negativeBaseValues"),s=t.get("positiveBaseValues"),r&&s||(k=!0,s=[],r=[])),this.set("negativeBaseValues",r),this.set("positiveBaseValues",s),f=0;f<u;++f)_=d[f],e=n[f],a(_)&&a(e)?(k?(g=Math.abs(e-this._leftOrigin),e>this._leftOrigin?(s[f]=e,r[f]=this._leftOrigin,e-=g):e<this._leftOrigin?(s[f]=this._leftOrigin,r[f]=e):(s[f]=e,r[f]=this._leftOrigin)):e<this._leftOrigin?(e=r[f]-(this._leftOrigin-n[f]),g=r[f]-e,r[f]=e):e>=this._leftOrigin&&(g=(e+=s[f]-this._leftOrigin)-s[f],s[f]=e,e-=g),!isNaN(g)&&g>0?(_-=c/2,S?(y.width[f]=g,y.height[f]=c,m.push(e),B.push(_)):(o.width=g,o.height=c,o.x=e,o.y=_,l&&(o.fill.color=l[f%l.length]),h&&(o.border.color=h[f%h.length]),this.getMarker(o,O,f))):S||this._markers.push(null)):(k&&(s[f]=this._leftOrigin,r[f]=this._leftOrigin),this._markers.push(null));S?this._createGroupMarker({fill:o.fill,border:o.border,dimensions:y,xvalues:m,yvalues:B,shape:o.shape}):this._clearMarkerCache()}},updateMarkerState:function(e,t){if(this._markers[t]){var r,s,l=this._getState(e),h=this.get("ycoords"),a=this._markers[t],o=this.get("styles").marker,g=o.height,c="off"!==l&&o[l]?this._copyObject(o[l]):this._copyObject(o);c.y=h[t]-g/2,c.x=a.get("x"),c.width=a.get("width"),c.id=a.get("id"),r=c.fill.color,s=c.border.color,i.isArray(r)?c.fill.color=r[t%r.length]:c.fill.color=this._getItemColor(c.fill.color,t),i.isArray(s)?c.border.color=s[t%s.length]:c.border.color=this._getItemColor(c.border.color,t),a.set(c)}},_getPlotDefaults:function(){var e={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};return e.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill"),e.border.color=this._getDefaultColor(this.get("graphOrder"),"border"),e}},{ATTRS:{type:{value:"stackedBar"},direction:{value:"vertical"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}})},"patched-v3.18.1",{requires:["series-stacked","series-bar"]});