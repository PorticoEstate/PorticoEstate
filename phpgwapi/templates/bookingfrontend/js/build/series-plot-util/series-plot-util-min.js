YUI.add("series-plot-util",function(r,e){var t=r.Lang,s=(0,r.ClassNameManager.getClassName)("seriesmarker");function a(r){this.addAttrs({markers:{getter:function(){return this._markers}}},r)}a.prototype={_plotDefaults:null,drawPlots:function(){if(this.get("xcoords")&&!(this.get("xcoords").length<1)){var r,e,s,a=t.isNumber,i=this._copyObject(this.get("styles").marker),o=i.width,l=i.height,h=this.get("xcoords"),n=this.get("ycoords"),c=0,u=h.length,g=n[0],p=o/2,_=l/2,d=null,k=null,f=this.get("graphOrder");if(this.get("groupMarkers")){for(e=[],s=[];c<u;++c)e.push(parseFloat(h[c]-p)),s.push(parseFloat(n[c]-_));this._createGroupMarker({xvalues:e,yvalues:s,fill:i.fill,border:i.border,dimensions:{width:o,height:l},graphOrder:f,shape:i.shape})}else{for(t.isArray(i.fill.color)&&(d=i.fill.color.concat()),t.isArray(i.border.color)&&(k=i.border.color.concat()),this._createMarkerCache();c<u;++c)g=parseFloat(n[c]-_),a(r=parseFloat(h[c]-p))&&a(g)?(d&&(i.fill.color=d[c%d.length]),k&&(i.border.color=k[c%k.length]),i.x=r,i.y=g,this.getMarker(i,f,c)):this._markers.push(null);this._clearMarkerCache()}}},_groupShapes:{circle:r.CircleGroup,rect:r.RectGroup,ellipse:r.EllipseGroup,diamond:r.DiamondGroup},_getGroupShape:function(r){return t.isString(r)&&(r=this._groupShapes[r]),r},_getPlotDefaults:function(){var r={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:1,alpha:1},width:10,height:10,shape:"circle"};return r.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill"),r.border.color=this._getDefaultColor(this.get("graphOrder"),"border"),r},_markers:null,_markerCache:null,getMarker:function(r,e,t){var s,a=r.border;if(r.id=this._getChart().get("id")+"_"+e+"_"+t,a.opacity=a.alpha,r.stroke=a,r.fill.opacity=r.fill.alpha,this._markerCache.length>0){for(;!s;){if(this._markerCache.length<1){s=this._createMarker(r);break}s=this._markerCache.shift()}s.set(r)}else s=this._createMarker(r);return this._markers.push(s),s},_createMarker:function(r){var e,t=this.get("graphic"),a=this._copyObject(r);return a.type=a.shape,(e=t.addShape(a)).addClass(s),e},_createMarkerCache:function(){this._groupMarker&&(this._groupMarker.destroy(),this._groupMarker=null),this._markers&&this._markers.length>0?this._markerCache=this._markers.concat():this._markerCache=[],this._markers=[]},_createGroupMarker:function(r){var e,t,s,a=this.get("markers"),i=r.border;if(a&&a.length>0){for(;a.length>0;)a.shift().destroy();this.set("markers",[])}i.opacity=i.alpha,(t={id:this._getChart().get("id")+"_"+r.graphOrder,stroke:i,fill:r.fill,dimensions:r.dimensions,xvalues:r.xvalues,yvalues:r.yvalues}).fill.opacity=r.fill.alpha,(s=this._getGroupShape(r.shape))&&(t.type=s),r.hasOwnProperty("radius")&&!isNaN(r.radius)&&(t.dimensions.radius=r.radius),this._groupMarker&&this._groupMarker.destroy(),e=this.get("graphic"),this._groupMarker=e.addShape(t),e._redraw()},_toggleVisible:function(r){var e,t,s=this.get("markers"),a=0;if(s)for(t=s.length;a<t;++a)(e=s[a])&&e.set("visible",r)},_clearMarkerCache:function(){for(var r;this._markerCache.length>0;)(r=this._markerCache.shift())&&r.destroy()},updateMarkerState:function(r,e){if(this._markers&&this._markers[e]){var t,s,a=this._copyObject(this.get("styles").marker),i=this._getState(r),o=this.get("xcoords"),l=this.get("ycoords"),h=this._markers[e],n="off"!==i&&a[i]?a[i]:a;n.fill.color=this._getItemColor(n.fill.color,e),n.border.color=this._getItemColor(n.border.color,e),n.stroke=n.border,h.set(n),t=n.width,s=n.height,h.set("x",o[e]-t/2),h.set("y",l[e]-s/2),h.set("visible",this.get("visible"))}},_getItemColor:function(r,e){return t.isArray(r)?r[e%r.length]:r},_setStyles:function(e){return e=this._parseMarkerStyles(e),r.Renderer.prototype._setStyles.apply(this,[e])},_parseMarkerStyles:function(r){if(r.marker){var e=this._getPlotDefaults();r.marker=this._mergeStyles(r.marker,e),r.marker.over&&(r.marker.over=this._mergeStyles(r.marker.over,r.marker)),r.marker.down&&(r.marker.down=this._mergeStyles(r.marker.down,r.marker))}return r},_getState:function(r){var e;switch(r){case"mouseout":e="off";break;case"mouseover":case"mouseup":e="over";break;case"mousedown":e="down"}return e},_stateSyles:null,drawSeries:function(){this.drawPlots()},_getDefaultStyles:function(){return this._mergeStyles({marker:this._getPlotDefaults()},this.constructor.superclass._getDefaultStyles())}},r.augment(a,r.Attribute),r.Plots=a},"patched-v3.18.1");