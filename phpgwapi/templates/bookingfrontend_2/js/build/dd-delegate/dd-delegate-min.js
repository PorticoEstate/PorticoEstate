YUI.add("dd-delegate",function(e,t){var s=function(){s.superclass.constructor.apply(this,arguments)},n="container",i="nodes",d=e.Node.create("<div>Temp Node</div>");e.extend(s,e.Base,{_bubbleTargets:e.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(e){this.set("dragNode",e.newVal)},_afterDragEnd:function(){e.DD.DDM._noShim=this._shimState,this.set("lastNode",this.dd.get("node")),this.get("lastNode").removeClass(e.DD.DDM.CSS_PREFIX+"-dragging"),this.dd._unprep(),this.dd.set("node",d)},_delMouseDown:function(t){var s=t.currentTarget,n=this.dd,d=s,a=this.get("dragConfig"),o=n.get("node");s.test(this.get(i))&&!s.test(this.get("invalid"))&&(this._shimState=e.DD.DDM._noShim,e.DD.DDM._noShim=!0,this.set("currentNode",s),o.inDoc()&&n._unprep(),n.set("node",s),a&&a.dragNode?d=a.dragNode:n.proxy&&(d=e.DD.DDM._proxy),n.set("dragNode",d),n._prep(),n.fire("drag:mouseDown",{ev:t}))},_onMouseEnter:function(){this._shimState=e.DD.DDM._noShim,e.DD.DDM._noShim=!0},_onMouseLeave:function(){e.DD.DDM._noShim=this._shimState},initializer:function(){this._handles=[];var t=this.get("dragConfig")||{},s=this.get(n);t.node=d.cloneNode(!0),t.bubbleTargets=this,this.get("handles")&&(t.handles=this.get("handles")),this.dd=new e.DD.Drag(t),this.dd.after("drag:end",e.bind(this._afterDragEnd,this)),this.dd.on("dragNodeChange",e.bind(this._onNodeChange,this)),this.dd.after("drag:mouseup",function(){this._unprep()}),this._handles.push(e.delegate(e.DD.Drag.START_EVENT,e.bind(this._delMouseDown,this),s,this.get(i))),this._handles.push(e.on("mouseenter",e.bind(this._onMouseEnter,this),s)),this._handles.push(e.on("mouseleave",e.bind(this._onMouseLeave,this),s)),e.later(50,this,this.syncTargets),e.DD.DDM.regDelegate(this)},syncTargets:function(){var t,s,d;if(e.Plugin.Drop&&!this.get("destroyed"))return this.get("target")&&(t=e.one(this.get(n)).all(this.get(i)),s=this.dd.get("groups"),(d=this.get("dragConfig"))&&d.groups&&(s=d.groups),t.each(function(e){this.createDrop(e,s)},this)),this},createDrop:function(t,s){var n={useShim:!1,bubbleTargets:this};return t.drop||t.plug(e.Plugin.Drop,n),t.drop.set("groups",s),t},destructor:function(){(this.dd&&this.dd.destroy(),e.Plugin.Drop)&&e.one(this.get(n)).all(this.get(i)).unplug(e.Plugin.Drop);e.Array.each(this._handles,function(e){e.detach()})}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:d},currentNode:{value:d},dragNode:{value:d},over:{value:!1},target:{value:!1},dragConfig:{value:null},handles:{value:null}}}),e.mix(e.DD.DDM,{_delegates:[],regDelegate:function(e){this._delegates.push(e)},getDelegate:function(t){var s=null;return t=e.one(t),e.Array.each(this._delegates,function(e){t.test(e.get(n))&&(s=e)},this),s}}),e.namespace("DD"),e.DD.Delegate=s},"patched-v3.18.1",{requires:["dd-drag","dd-drop-plugin","event-mouseenter"]});